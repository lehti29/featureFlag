(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},CfmU:function(t){t.exports=JSON.parse('{"a":"10.14.1"}')},MgzW:function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,a,c=s(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(c[l]=n[l]);if(r){a=r(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(c[a[h]]=n[a[h]])}}return c}},aqdR:function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,s;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)o(l[n],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},u3xc:function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<128?e(127&n):n<2048?(e(n>>6&31|192),e(63&n|128)):n<65536?(e(n>>12&15|224),e(n>>6&63|128),e(63&n|128)):(e(n>>18&7|240),e(n>>12&63|128),e(n>>6&63|128),e(63&n|128)),n=null},decodeUTF8:function(t,e){for(var n,r,i,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(n=t());)if(0==(128&n))e(n);else if(192==(224&n))null===(r=t())&&s([n,r]),e((31&n)<<6|63&r);else if(224==(240&n))(null===(r=t())||null===(i=t()))&&s([n,r,i]),e((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=t())||null===(i=t())||null===(o=t()))&&s([n,r,i,o]),e((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(t,e){for(var n,r=null;null!==(n=null!==r?r:t());)n>=55296&&n<=57343&&null!==(r=t())&&r>=56320&&r<=57343?(e(1024*(n-55296)+r-56320+65536),r=null):e(n);null!==r&&e(r)},UTF8toUTF16:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<=65535?e(n):(e(55296+((n-=65536)>>10)),e(n%1024+56320)),n=null},encodeUTF16toUTF8:function(e,n){t.UTF16toUTF8(e,(function(e){t.encodeUTF8(e,n)}))},decodeUTF8toUTF16:function(e,n){t.decodeUTF8(e,(function(e){t.UTF8toUTF16(e,n)}))},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,n=0;null!==(e=t());)n+=e<128?1:e<2048?2:e<65536?3:4;return n},calculateUTF16asUTF8:function(e){var n=0,r=0;return t.UTF16toUTF8(e,(function(t){++n,r+=t<128?1:t<2048?2:t<65536?3:4})),[n,r]}},e=String.fromCharCode;return t.arraySource=function(t){if(!Array.isArray(t))throw TypeError("Illegal argument: "+typeof t);var e=0;return function(){return e>=t.length?null:t[e++]}},t.arrayDestination=function(t){if(!Array.isArray(t))throw TypeError("Illegal argument: "+typeof t);return Array.prototype.push.bind(t)},t.stringSource=function(t){if("string"!=typeof t)throw TypeError("Illegal argument: "+typeof t);var e=0;return function(){return e>=t.length?null:t.charCodeAt(e++)}},t.stringDestination=function(){var t=[],n=[];return function(){if(0===arguments.length)return n.join("")+e.apply(String,t);t.length+arguments.length>1024&&(n.push(e.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}},t.assertCharCode=function(t){if("number"!=typeof t||t!=t)throw TypeError("Illegal char code: "+typeof t);if(t<0||t>65535)throw RangeError("Illegal char code: "+t);return t},t.assertCodePoint=function(e){if("number"!=typeof e||e!=e)throw TypeError("Illegal code point: "+typeof e);if(e<0||e>t.MAX_CODEPOINT)throw RangeError("Illegal code point: "+e);return e},t.fromCodePoint=function(e){var n,r=0,i=arguments,o=i.length;return t.UTF8toUTF16((function(){return r<o?t.assertCodePoint(i[r++]):null}),n=t.stringDestination()),n()},t.codePointAt=function(e,n){if("string"!=typeof e&&!(e&&e instanceof String)||"number"!=typeof n)throw TypeError("Illegal arguments: "+typeof e+", "+typeof n);var r,i;if(!(n<0||n>=(r=e.length)))return t.UTF16toUTF8((function(){return void 0===i&&n<r?e.charCodeAt(n++):null}),(function(t){i=t})),i},t.polyfill=function(e){return String.fromCodePoint&&!e||(String.fromCodePoint=t.fromCodePoint),String.prototype.codePointAt&&!e||(String.prototype.codePointAt=function(e){return t.codePointAt(this,e)}),t},t})?r.call(e,n,e,t):r)||(t.exports=i)},y5ZV:function(t,e,n){t.exports=n("u3xc")},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},c=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(s){e=s instanceof l?f(s.errors):[s]}if(c(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(u(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof l?e=e.concat(f(s.errors)):e.push(s)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class S extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class T extends p{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new T(this)}lift(t){const e=new w(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new S(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new w(t,e),t})();class w extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}class k extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const C=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=A();const N=t=>{if(t&&"function"==typeof t[m])return o=t,t=>{const e=o[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((e=t)&&"number"==typeof e.length&&"function"!=typeof e)return C(t);var e,n,r,i,o;if((n=t)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return i=t,t=>(i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[I])return r=t,t=>{const e=r[I]();for(;;){const n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}};class R extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class O{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new x(t,this.project,this.thisArg))}}class x extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class D{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new P(t,this.project,this.concurrent))}}class P extends R{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new k(this,e,n),i=this.destination;i.add(r);const o=function(t,e,n,r,i=new k(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):N(e)(i)}(this,t,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function M(){return function(t){return t.lift(new F(t))}}class F{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new L(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class L extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class j extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new U(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return M()(this)}}const H=(()=>{const t=j.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class U extends T{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function V(){return new E}function G(t){return{toString:t}.toString()}function K(t,e,n){return G(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const B=K("Inject",t=>({token:t})),W=K("Optional"),z=K("Self"),q=K("SkipSelf");var Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function Z(t){for(let e in t)if(t[e]===Z)return e;throw Error("Could not find renamed property on target object.")}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function J(t){return X(t,t[et])||X(t,t[it])}function X(t,e){return e&&e.token===t?e:null}function tt(t){return t&&(t.hasOwnProperty(nt)||t.hasOwnProperty(ot))?t[nt]:null}const et=Z({"\u0275prov":Z}),nt=Z({"\u0275inj":Z}),rt=Z({"\u0275provFallback":Z}),it=Z({ngInjectableDef:Z}),ot=Z({ngInjectorDef:Z});function st(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(st).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function at(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ct=Z({__forward_ref__:Z});function ut(t){return t.__forward_ref__=ut,t.toString=function(){return st(this())},t}function lt(t){return"function"==typeof(e=t)&&e.hasOwnProperty(ct)&&e.__forward_ref__===ut?t():t;var e}const ht="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,dt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pt="undefined"!=typeof global&&global,gt=ht||pt||ft||dt,mt=Z({"\u0275cmp":Z}),yt=Z({"\u0275dir":Z}),vt=Z({"\u0275pipe":Z}),_t=Z({"\u0275mod":Z}),bt=Z({"\u0275loc":Z}),St=Z({"\u0275fac":Z}),Tt=Z({__NG_ELEMENT_ID__:Z});class Et{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Q({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const wt=new Et("INJECTOR",-1),kt={},Ct=/\n/gm,At=Z({provide:String,useValue:Z});let It,Nt=void 0;function Rt(t){const e=Nt;return Nt=t,e}function Ot(t){const e=It;return It=t,e}function xt(t,e=Y.Default){if(void 0===Nt)throw new Error("inject() must be called from an injection context");return null===Nt?Pt(t,void 0,e):Nt.get(t,e&Y.Optional?null:void 0,e)}function Dt(t,e=Y.Default){return(It||xt)(lt(t),e)}function Pt(t,e,n){const r=J(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${st(t)}]`)}function Mt(t){const e=[];for(let n=0;n<t.length;n++){const r=lt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=Y.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof W||"Optional"===i.ngMetadataName||i===W?n|=Y.Optional:i instanceof q||"SkipSelf"===i.ngMetadataName||i===q?n|=Y.SkipSelf:i instanceof z||"Self"===i.ngMetadataName||i===z?n|=Y.Self:t=i instanceof B||i===B?i.token:i}e.push(Dt(t,n))}else e.push(Dt(r))}return e}class Ft{get(t,e=kt){if(e===kt){const e=new Error(`NullInjectorError: No provider for ${st(t)}!`);throw e.name="NullInjectorError",e}return e}}class Lt{}function jt(t,e){t.forEach(t=>Array.isArray(t)?jt(t,e):e(t))}function Ht(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ut(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Vt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),Gt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Kt={},Bt=[];let Wt=0;function zt(t){return G(()=>{const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===Vt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Bt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Gt.Emulated,id:"c",styles:t.styles||Bt,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,s=t.features,a=t.pipes;return i.id+=Wt++,i.inputs=$t(t.inputs,r),i.outputs=$t(t.outputs),s&&s.forEach(t=>t(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(qt):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(Yt):null,i})}function qt(t){return Xt(t)||function(t){return t[yt]||null}(t)}function Yt(t){return function(t){return t[vt]||null}(t)}const Zt={};function Qt(t){const e={type:t.type,bootstrap:t.bootstrap||Bt,declarations:t.declarations||Bt,imports:t.imports||Bt,exports:t.exports||Bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&G(()=>{Zt[t.id]=t.type}),e}function $t(t,e){if(null==t)return Kt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Jt=zt;function Xt(t){return t[mt]||null}function te(t,e){return t.hasOwnProperty(St)?t[St]:null}function ee(t,e){const n=t[_t]||null;if(!n&&!0===e)throw new Error(`Type ${st(t)} does not have '\u0275mod' property.`);return n}function ne(t){return Array.isArray(t)&&"object"==typeof t[1]}function re(t){return Array.isArray(t)&&!0===t[1]}function ie(t){return 0!=(8&t.flags)}function oe(t){return 2==(2&t.flags)}function se(t){return 1==(1&t.flags)}function ae(t){return null!==t.template}function ce(t){return 0!=(512&t[2])}let ue=void 0;function le(t){return!!t.listen}const he={createRenderer:(t,e)=>void 0!==ue?ue:"undefined"!=typeof document?document:void 0};function fe(t){for(;Array.isArray(t);)t=t[0];return t}function de(t,e){return fe(e[t.index])}function pe(t,e){return t.data[e+20]}function ge(t,e){const n=e[t];return ne(n)?n:n[0]}function me(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ye(t){return 128==(128&t[2])}function ve(t,e){return null===t||null==e?null:t[e]}function _e(t){t[18]=0}function be(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Se={lFrame:Fe(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Te(){return Se.bindingsEnabled}function Ee(){return Se.lFrame.lView}function we(){return Se.lFrame.tView}function ke(){return Se.lFrame.previousOrParentTNode}function Ce(t,e){Se.lFrame.previousOrParentTNode=t,Se.lFrame.isParent=e}function Ae(){return Se.lFrame.isParent}function Ie(){return Se.checkNoChangesMode}function Ne(t){Se.checkNoChangesMode=t}function Re(t,e){const n=Se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Oe(e)}function Oe(t){Se.lFrame.currentDirectiveIndex=t}function xe(t){Se.lFrame.currentQueryIndex=t}function De(t,e){const n=Me();Se.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function Pe(t,e){const n=Me(),r=t[1];Se.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function Me(){const t=Se.lFrame,e=null===t?null:t.child;return null===e?Fe(t):e}function Fe(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Le(){const t=Se.lFrame;return Se.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const je=Le;function He(){const t=Le();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ue(){return Se.lFrame.selectedIndex}function Ve(t){Se.lFrame.selectedIndex=t}function Ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function Ke(t,e,n){ze(t,e,3,n)}function Be(t,e,n,r){(3&t[2])===n&&ze(t,e,n,r)}function We(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ze(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(qe(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function qe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ze(t,e,n){const r=le(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Qe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Qe(t){return 64===t.charCodeAt(0)}function $e(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Xe(t){return-1!==t}function tn(t){return 32767&t}function en(t){return t>>16}function nn(t,e){let n=en(t),r=e;for(;n>0;)r=r[15],n--;return r}function rn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":""+t}(t)}const on=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gt))();function sn(t){return t instanceof Function?t():t}let an=!0;function cn(t){const e=an;return an=t,e}let un=0;function ln(t,e){const n=fn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,hn(r.data,t),hn(e,null),hn(r.blueprint,null));const i=dn(t,e),o=t.injectorIndex;if(Xe(i)){const t=tn(i),n=nn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function hn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function dn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function pn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[Tt]:n.charCodeAt(0)||0;null==r&&(r=n[Tt]=un++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=e.data;128&i?s?a?c[t+7]|=o:c[t+6]|=o:a?c[t+5]|=o:c[t+4]|=o:s?a?c[t+3]|=o:c[t+2]|=o:a?c[t+1]|=o:c[t]|=o}(t,e,n)}function gn(t,e,n,r=Y.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[Tt];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){De(e,t);try{const t=i();if(null!=t||r&Y.Optional)return t;throw new Error(`No provider for ${rn(n)}!`)}finally{je()}}else if("number"==typeof i){if(-1===i)return new Sn(t,e);let o=null,s=fn(t,e),a=-1,c=r&Y.Host?e[16][6]:null;for((-1===s||r&Y.SkipSelf)&&(a=-1===s?dn(t,e):e[s+8],bn(r,!1)?(o=e[1],s=tn(a),e=nn(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(_n(i,s,t.data)){const t=yn(s,e,n,o,r,c);if(t!==mn)return t}bn(r,e[1].data[s+8]===c)&&_n(i,s,e)?(o=t,s=tn(a),e=nn(a,e)):s=-1}}}if(r&Y.Optional&&void 0===i&&(i=null),0==(r&(Y.Self|Y.Host))){const t=e[9],o=Ot(void 0);try{return t?t.get(n,i,r&Y.Optional):Pt(n,i,r&Y.Optional)}finally{Ot(o)}}if(r&Y.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${rn(n)}]`)}const mn={};function yn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=65535&o,c=t.directiveStart,u=o>>16,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&ae(t)&&t.type===n)return c}return null}(a,s,n,null==r?oe(a)&&an:r!=s&&3===a.type,i&Y.Host&&o===a);return null!==c?vn(e,s,c,a):mn}function vn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ye){const s=i;if(s.resolving)throw new Error("Circular dep for "+rn(o[n]));const a=cn(s.canSeeViewProviders);let c;s.resolving=!0,s.injectImpl&&(c=Ot(s.injectImpl)),De(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:o}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&Ot(c),cn(a),s.resolving=!1,je()}}return i}function _n(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function bn(t,e){return!(t&Y.Self||t&Y.Host&&e)}class Sn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return gn(this._tNode,this._lView,t,void 0,e)}}function Tn(t){return t.ngDebugContext}function En(t){return t.ngOriginalError}function wn(t,...e){t.error(...e)}class kn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||wn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Tn(t)?Tn(t):this._findContext(En(t)):null}_findOriginalError(t){let e=En(t);for(;e&&En(e);)e=En(e);return e}}let Cn=!0,An=!1;function In(){return An=!0,Cn}function Nn(t,e){t.__ngContext__=e}function Rn(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function On(){throw new Error("Cannot mix multi providers and regular providers")}function xn(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Dn(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==xn(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Pn(t){return 0===t.type&&"ng-template"!==t.tagName}function Mn(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Fn(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let n=0;n<t.length;n++)if(3===(e=t[n])||4===e||6===e)return n;var e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Mn(t,c,n)||""===c&&1===e.length){if(Ln(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Dn(t.attrs,u,n)){if(Ln(r))return!1;s=!0}continue}const l=jn(8&r?"class":c,i,Pn(t),n);if(-1===l){if(Ln(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==xn(e,u,0)||2&r&&u!==t){if(Ln(r))return!1;s=!0}}}}else{if(!s&&!Ln(r)&&!Ln(c))return!1;if(s&&Ln(c))continue;s=!1,r=c|1&r}}return Ln(r)||s}function Ln(t){return 0==(1&t)}function jn(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Hn(t,e,n=!1){for(let r=0;r<e.length;r++)if(Fn(t,e[r],n))return!0;return!1}function Un(t,e){return t?":not("+e.trim()+")":e}function Vn(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ln(s)||(e+=Un(o,i),i=""),r=s,o=o||!Ln(r);n++}return""!==i&&(e+=Un(o,i)),e}const Gn={};function Kn(t){const e=t[3];return re(e)?e[3]:e}function Bn(t){return zn(t[13])}function Wn(t){return zn(t[4])}function zn(t){for(;null!==t&&!re(t);)t=t[4];return t}function qn(t){Yn(we(),Ee(),Ue()+t,Ie())}function Yn(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ke(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Be(e,r,0,n)}Ve(n)}function Zn(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];xe(i),n.contentQueries(2,e[o],o)}}}function Qn(t,e,n){return le(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function $n(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,_e(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Jn(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=ke(),a=Ae(),c=a?s:s&&s.parent,u=t.data[n]=ar(0,c&&c!==e?c:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=u),s&&(!a||null!=s.child||null===u.parent&&2!==s.type?a||(s.next=u):s.child=u),u}(t,e,s,r,i,o);return Ce(a,!0),a}function Xn(t,e,n){Pe(e,e[6]);try{const r=t.viewQuery;null!==r&&Ar(1,r,n);const i=t.template;null!==i&&nr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Zn(t,e),t.staticViewQueries&&Ar(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Er(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,He()}}function tr(t,e,n,r){const i=e[2];if(256==(256&i))return;Pe(e,e[6]);const o=Ie();try{_e(e),Se.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&nr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ke(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Be(e,n,0,null),We(e,0)}if(function(t){for(let e=Bn(t);null!==e;e=Wn(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&be(r,1),n[2]|=1024}}}(e),function(t){for(let e=Bn(t);null!==e;e=Wn(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];ye(n)&&tr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Zn(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ke(e,n)}else{const n=t.contentHooks;null!==n&&Be(e,n,1),We(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Ve(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(Re(r,i),s(2,e[i])),i++)}}}finally{Ve(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Tr(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&Ar(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ke(e,n)}else{const n=t.viewHooks;null!==n&&Be(e,n,2),We(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,be(e[3],-1))}finally{He()}}function er(t,e,n,r){const i=e[10],o=!Ie(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&Xn(t,e,r),tr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function nr(t,e,n,r,i){const o=Ue();try{Ve(-1),2&r&&e.length>20&&Yn(t,e,0,Ie()),n(r,i)}finally{Ve(o)}}function rr(t,e,n){Te()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ln(n,e),Nn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ae(r);o&&vr(e,n,r);const c=vn(e,t,a,n);Nn(c,e),null!==s&&_r(0,a-i,c,r,0,s),o&&(ge(n.index,e)[8]=c)}}(t,e,n,de(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,c=Se.lFrame.currentDirectiveIndex;try{Ve(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Oe(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?fr(r,i):s&&o.push(null)}}finally{Ve(-1),Oe(c)}}(t,e,n))}function ir(t,e,n=de){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function or(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=sr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function sr(t,e,n,r,i,o,s,a,c,u){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Gn);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:u,incompleteFirstPass:!1}}function ar(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ur(t,e,n,r){let i=!1;if(Te()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Hn(n,s.selectors,!1)&&(i||(i=[]),pn(ln(n,e),t,s.type),ae(s)?(2&n.flags&&Rn(n),pr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,mr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}dr(t,n,o.length);let a=!1,c=!1;for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=$e(n.mergedAttrs,u.hostAttrs),yr(t,e,u),gr(t.data.length-1,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128),!a&&(u.onChanges||u.onInit||u.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),c||!u.onChanges&&!u.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),c=!0),lr(t,u),r+=u.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||Pn(e)?null:br(n,i);o.push(u),s=cr(n,c,s),a=cr(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),hr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=$e(n.mergedAttrs,n.attrs),i}function lr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function hr(t,e,n){for(let r=0;r<n;r++)e.push(Gn),t.blueprint.push(Gn),t.data.push(null)}function fr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function dr(t,e,n){const r=20-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function pr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function gr(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ae(e)&&(n[""]=t)}}function mr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yr(t,e,n){t.data.push(n);const r=n.factory||(n.factory=te(n.type)),i=new Ye(r,ae(n),null);t.blueprint.push(i),e.push(i)}function vr(t,e,n){const r=de(e,t),i=or(n),o=t[10],s=wr(t,$n(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function _r(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function br(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Sr(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Tr(t,e){const n=ge(e,t);if(ye(n)){const t=n[1];80&n[2]?tr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Bn(e);null!==r;r=Wn(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];tr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=ge(n[r],e);ye(i)&&i[5]>0&&t(i)}}(n)}}function Er(t,e){const n=ge(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xn(r,n,n[8])}function wr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function kr(t,e,n){const r=e[10];r.begin&&r.begin();try{tr(t,e,t.template,n)}catch(i){throw function(t,e){const n=t[9],r=n?n.get(kn,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function Cr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=me(n),i=r[1];er(i,r,i.template,n)}}(t[8])}function Ar(t,e,n){xe(0),e(t,n)}const Ir=(()=>Promise.resolve(null))();function Nr(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Rr(t,e){const n=e[3];return-1===t.index?re(n)?n:null:n}function Or(t,e){const n=Rr(t,e);return n?Gr(e[11],n[7]):null}function xr(t,e,n,r,i){if(null!=r){let o,s=!1;re(r)?o=r:ne(r)&&(s=!0,r=r[0]);const a=fe(r);0===t&&null!==n?null==i?Ur(e,n,a):Hr(e,n,a,i||null):1===t&&null!==n?Hr(e,n,a,i||null):2===t?function(t,e,n){const r=Gr(t,e);r&&function(t,e,n,r){le(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==fe(n)&&xr(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];zr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Dr(t,e,n,r){const i=Or(t.node,e);i&&zr(t,e,e[11],n?1:2,i,r)}function Pr(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&be(e[3],-1),n.splice(r,1)}function Mr(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Pr(i,r),e>0&&(t[n-1][4]=r[4]);const o=Ut(t,10+e);Dr(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Fr(t,e){if(!(256&e[2])){const n=e[11];le(n)&&n.destroyNode&&zr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return jr(t[1],t);for(;e;){let n=null;if(ne(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ne(e)&&jr(e[1],e),e=Lr(e,t);null===e&&(e=t),ne(e)&&jr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Lr(t,e){let n;return ne(t)&&(n=t[6])&&2===n.type?Rr(n,t):t[3]===e?null:t[3]}function jr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):fe(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&le(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&re(e[3])){r!==e[3]&&Pr(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Hr(t,e,n,r){le(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ur(t,e,n){le(t)?t.appendChild(e,n):e.appendChild(n)}function Vr(t,e,n,r){null!==r?Hr(t,e,n,r):Ur(t,e,n)}function Gr(t,e){return le(t)?t.parentNode(e):e.parentNode}function Kr(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Or(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return de(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==Gt.ShadowDom&&n!==Gt.Native)return null}return de(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=Rr(t,e);return null===n?null:Br(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?de(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Vr(t,i,n[e],o);else Vr(t,i,n,o)}}function Br(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return de(n,e);if(0===r)return Br(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return re(t)?Br(-1,t):fe(t)}}{const r=e[16],i=r[6],o=Kn(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Wr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;s&&0===e&&(a&&Nn(fe(a),r),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Wr(t,e,n.child,r,i,o,!1),xr(e,t,i,a,o)):1===c?qr(t,e,r,n,i,o):xr(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function zr(t,e,n,r,i,o){Wr(n,r,t.node.child,e,i,o,!1)}function qr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)xr(e,t,i,a[c],o);else Wr(t,e,a,s[3],i,o,!0)}function Yr(t,e,n){le(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zr(t,e,n){le(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Qr{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(fe(s)),re(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Kn(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Fr(this._lView[1],this._lView)}onDestroy(t){var e,n,r,i;e=this._lView[1],r=t,(i=n=this._lView,i[7]||(i[7]=[])).push(r),e.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(e).push(n[7].length-1,null)}markForCheck(){!function(t){for(;t;){t[2]|=64;const e=Kn(t);if(ce(t)&&!e)return t;t=e}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){kr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ne(!0);try{kr(t,e,n)}finally{Ne(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,zr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class $r extends Qr{constructor(t){super(t),this._view=t}detectChanges(){Cr(this._view)}checkNoChanges(){!function(t){Ne(!0);try{Cr(t)}finally{Ne(!1)}}(this._view)}get context(){return null}}let Jr,Xr,ti;function ei(t,e,n){return Jr||(Jr=class extends t{}),new Jr(de(e,n))}const ni=new Et("Set Injector scope."),ri={},ii={},oi=[];let si=void 0;function ai(){return void 0===si&&(si=new Ft),si}function ci(t,e=null,n=null,r){return new ui(t,n,e||ai(),r)}class ui{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&jt(e,n=>this.processProvider(n,t,e)),jt([t],t=>this.processInjectorType(t,[],i)),this.records.set(wt,hi(void 0,this));const o=this.records.get(ni);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:st(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=kt,n=Y.Default){this.assertNotDestroyed();const r=Rt(this);try{if(!(n&Y.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Et)&&J(t);e=n&&this.injectableDefInScope(n)?hi(li(t),ri):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&Y.Self?ai():this.parent).get(t,e=n&Y.Optional&&e===kt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(st(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):st(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ct,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Rt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(st(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=lt(t)))return!1;let r=tt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=tt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{jt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];jt(r,t=>this.processProvider(t,n,r||oi))}}this.injectorDefTypes.add(o),this.records.set(o,hi(r.factory,ri));const a=r.providers;if(null!=a&&!s){const e=t;jt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=di(t=lt(t))?t:lt(t&&t.provide);const i=function(t,e,n){return fi(t)?hi(void 0,t.useValue):hi(function(t,e,n){let r=void 0;if(di(t)){const e=lt(t);return te(e)||li(e)}if(fi(t))r=()=>lt(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Mt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Dt(lt(t.useExisting));else{const i=lt(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${st(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return te(i)||li(i);r=()=>new i(...Mt(t.deps))}var i;return r}(t,e,n),ri)}(t,e,n);if(di(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&On()}else{let e=this.records.get(r);e?void 0===e.multi&&On():(e=hi(void 0,ri,!0),e.factory=()=>Mt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ii?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(st(t)):e.value===ri&&(e.value=ii,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function li(t){const e=J(t),n=null!==e?e.factory:te(t);if(null!==n)return n;const r=tt(t);if(null!==r)return r.factory;if(t instanceof Et)throw new Error(`Token ${st(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${st(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[et]||t[it]||t[rt]&&t[rt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function hi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fi(t){return null!==t&&"object"==typeof t&&At in t}function di(t){return"function"==typeof t}const pi=function(t,e,n){return function(t,e=null,n=null,r){const i=ci(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let gi=(()=>{class t{static create(t,e){return Array.isArray(t)?pi(t,e,""):pi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=kt,t.NULL=new Ft,t.\u0275prov=Q({token:t,providedIn:"any",factory:()=>Dt(wt)}),t.__NG_ELEMENT_ID__=-1,t})(),mi=new Map;const yi=new Set;function vi(t){return"string"==typeof t?t:t.text()}function _i(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=at(i,t):2==o&&(r=at(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let bi=null;function Si(){if(!bi){const t=gt.Symbol;if(t&&t.iterator)bi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(bi=n)}}}return bi}function Ti(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Ei(t){return!!wi(t)&&(Array.isArray(t)||!(t instanceof Map)&&Si()in t)}function wi(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ki(t,e,n,r,i,o,s,a){const c=Ee(),u=we(),l=t+20,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=Jn(e,n[6],t,0,s||null,ve(u,a));ur(e,n,l,ve(u,c)),Ge(e,l);const h=l.tViews=sr(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u),f=ar(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,u,c,e,n,r,i,o,s):u.data[l];Ce(h,!1);const f=c[11].createComment("");Kr(u,c,f,h),Nn(f,c),wr(c,c[l]=Sr(f,c,f,h)),se(h)&&rr(u,c,h),null!=s&&ir(c,h,a)}function Ci(t,e=Y.Default){const n=Ee();return null==n?Dt(t,e):gn(ke(),n,lt(t),e)}function Ai(t,e,n){const r=Ee();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(r,Se.lFrame.bindingIndex++,e)&&function(t,e,n,r,i,o,s,a){const c=de(e,n);let u,l=e.inputs;var h;null!=l&&(u=l[r])?(Nr(t,n,u,r,i),oe(e)&&function(t,e){const n=ge(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,le(o)?o.setProperty(c,r,i):Qe(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}(we(),function(){const t=Se.lFrame;return pe(t.tView,t.selectedIndex)}(),r,t,e,r[11],n),Ai}function Ii(t,e,n,r,i){const o=i?"class":"style";Nr(t,n,e.inputs[o],o,r)}function Ni(t,e,n,r){const i=Ee(),o=we(),s=20+t,a=i[11],c=i[s]=Qn(e,a,Se.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=ve(a,o),u=Jn(e,n[6],t,3,i,c);return ur(e,n,u,ve(a,s)),null!==u.attrs&&_i(u,u.attrs,!1),null!==u.mergedAttrs&&_i(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];Ce(u,!0);const l=u.mergedAttrs;null!==l&&Ze(a,c,l);const h=u.classes;null!==h&&Zr(a,c,h);const f=u.styles;null!==f&&Yr(a,c,f),Kr(o,i,c,u),0===Se.lFrame.elementDepthCount&&Nn(c,i),Se.lFrame.elementDepthCount++,se(u)&&(rr(o,i,u),function(t,e,n){if(ie(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,u,i)),null!==r&&ir(i,u)}function Ri(){let t=ke();Ae()?Se.lFrame.isParent=!1:(t=t.parent,Ce(t,!1));const e=t;Se.lFrame.elementDepthCount--;const n=we();n.firstCreatePass&&(Ge(n,t),ie(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ii(n,e,Ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ii(n,e,Ee(),e.stylesWithoutHost,!1)}function Oi(t){return!!t&&"function"==typeof t.then}function xi(t,e=""){const n=Ee(),r=we(),i=t+20,o=r.firstCreatePass?Jn(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return le(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Kr(r,n,s,o),Ce(o,!1)}function Di(t,e){const n=me(t)[1],r=n.data.length-1;Ge(n,{directiveStart:r,directiveEnd:r+1})}class Pi{}class Mi{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${st(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Fi=(()=>{class t{}return t.NULL=new Mi,t})(),Li=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ji(t),t})();const ji=function(t){return ei(t,ke(),Ee())};class Hi{}const Ui=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Vi=(()=>{class t{}return t.\u0275prov=Q({token:t,providedIn:"root",factory:()=>null}),t})();class Gi{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ki=new Gi("9.1.12");class Bi{constructor(){}supports(t){return Ei(t)}create(t){return new zi(t)}}const Wi=(t,e)=>e;class zi{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wi}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Qi(n,r,i)?e:n,s=Qi(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ei(t))throw new Error(`Error trying to diff '${st(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Ti(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Ti(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Si()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Ti(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Ti(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ti(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ti(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new qi(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Zi),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zi),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qi{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yi{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ti(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Zi{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Yi,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qi(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class $i{constructor(){}supports(t){return t instanceof Map||wi(t)}create(){return new Ji}}class Ji{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||wi(t)))throw new Error(`Error trying to diff '${st(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Xi(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ti(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Xi{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let to=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new q,new W]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=Q({token:t,providedIn:"root",factory:()=>new t([new Bi])}),t})(),eo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new q,new W]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=Q({token:t,providedIn:"root",factory:()=>new t([new $i])}),t})();const no=[new $i],ro=new to([new Bi]),io=new eo(no);let oo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>so(t,Li),t})();const so=function(t,e){return function(t,e,n,r){return Xr||(Xr=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=$n(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xn(e,n,t),new Qr(n)}}),0===n.type?new Xr(r,n,ei(e,n,r)):null}(t,e,ke(),Ee())};let ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>co(t,Li),t})();const co=function(t,e){return function(t,e,n,r){let i;ti||(ti=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return ei(e,this._hostTNode,this._hostView)}get injector(){return new Sn(this._hostTNode,this._hostView)}get parentInjector(){const t=dn(this._hostTNode,this._hostView),e=nn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=en(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Xe(t)&&null!=n?new Sn(n,e):new Sn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Lt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),re(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ti(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Ht(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Dr(r,n,!0,Br(i,this._lContainer)),t.attachToViewContainerRef(this),Ht(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=Mr(t,e);n&&Fr(n[1],n)}(this._lContainer,e),Ut(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);return n&&null!=Ut(this._lContainer[8],e)?new Qr(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(re(o))i=o;else{let t;if(4===n.type)t=fe(o);else if(t=r[11].createComment(""),ce(r)){const e=r[11],i=de(n,r);Hr(e,Gr(e,i),t,function(t,e){return le(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Kr(r[1],r,t,n);r[n.index]=i=Sr(o,r,t,n),wr(r,i)}return new ti(i,n,r)}(t,e,ke(),Ee())},uo={};class lo extends Fi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Xt(t);return new po(e,this.ngModule)}}function ho(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const fo=new Et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>on});class po extends Pi{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Vn).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ho(this.componentDef.inputs)}get outputs(){return ho(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,uo,i);return o!==uo||r===uo?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Hi,he),s=i.get(Vi,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(le(t))return t.selectRootElement(e,n===Gt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Qn(c,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),f={components:[],scheduler:on,clean:Ir,playerHandler:null,flags:0},d=sr(0,-1,null,1,0,null,null,null,null,null),p=$n(null,d,f,l,null,null,o,a,s,i);let g,m;Pe(p,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Jn(s,null,0,3,null,null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(_i(a,c,!0),null!==t&&(Ze(i,t,c),null!==a.classes&&Zr(i,t,a.classes),null!==a.styles&&Yr(i,t,a.styles)));const u=r.createRenderer(t,e),l=$n(n,or(e),null,e.onPush?64:16,n[20],a,r,u,void 0);return s.firstCreatePass&&(pn(ln(a,n),s,e.type),pr(s,a),mr(a,n.length,1)),wr(n,l),n[20]=l}(u,this.componentDef,p,o,a);if(u)if(n)Ze(a,u,["ng-version",Ki.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ln(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ze(a,u,t),e&&e.length>0&&Zr(a,u,e.join(" "))}if(m=pe(d,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}g=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ke();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),dr(t,r,1),yr(t,e,n));const i=vn(e,t,e.length-1,r);Nn(i,e);const o=de(r,e);return o&&Nn(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ke();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ve(a.index-20);const t=n[1];lr(t,e),hr(t,n,e.hostVars),fr(e,s)}return s}(t,this.componentDef,p,f,[Di]),Xn(d,p,null)}finally{He()}const y=new go(this.componentType,g,ei(Li,m,p),p,m);return n&&!h||(d.node.child=m),y}}class go extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new $r(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=ar(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new Sn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const mo=void 0;var yo=["en",[["a","p"],["AM","PM"],mo],[["AM","PM"],mo,mo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mo,"{1} 'at' {0}",mo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let vo={};function _o(t){return t in vo||(vo[t]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[t]),vo[t]}const bo=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let So="en-US";function To(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(So=t.toLowerCase().replace(/_/g,"-"))}const Eo=new Map;class wo extends Lt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lo(this);const n=ee(t),r=t[bt]||null;r&&To(r),this._bootstrapComponents=sn(n.bootstrap),this._r3Injector=ci(t,e,[{provide:Lt,useValue:this},{provide:Fi,useValue:this.componentFactoryResolver}],st(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=gi.THROW_IF_NOT_FOUND,n=Y.Default){return t===gi||t===Lt||t===wt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ko extends class{}{constructor(t){super(),this.moduleType=t,null!==ee(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${st(e)} vs ${st(e.name)}`)})(t,Eo.get(t),e),Eo.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new wo(this.moduleType,t)}}class Co extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof h&&t.add(s),s}}const Ao=new Et("Application Initializer");let Io=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Oi(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Dt(Ao,8))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const No=new Et("AppId"),Ro={provide:No,useFactory:function(){return`${Oo()}${Oo()}${Oo()}`},deps:[]};function Oo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xo=new Et("Platform Initializer"),Do=new Et("Platform ID"),Po=new Et("appBootstrapListener");let Mo=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const Fo=new Et("LocaleId"),Lo=new Et("DefaultCurrencyCode");class jo{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ho=function(t){return new ko(t)},Uo=Ho,Vo=function(t){return Promise.resolve(Ho(t))},Go=function(t){const e=Ho(t),n=sn(ee(t).declarations).reduce((t,e)=>{const n=Xt(e);return n&&t.push(new po(n)),t},[]);return new jo(e,n)},Ko=Go,Bo=function(t){return Promise.resolve(Go(t))};let Wo=(()=>{class t{constructor(){this.compileModuleSync=Uo,this.compileModuleAsync=Vo,this.compileModuleAndAllComponentsSync=Ko,this.compileModuleAndAllComponentsAsync=Bo}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const zo=new Et("compilerOptions"),qo=(()=>Promise.resolve(0))();function Yo(t){"undefined"==typeof Zone?qo.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Zo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Co(!1),this.onMicrotaskEmpty=new Co(!1),this.onStable=new Co(!1),this.onError=new Co(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=gt.requestAnimationFrame,e=gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(gt,()=>{t.lastRequestAnimationFrameId=-1,Xo(t),Jo(t)}),Xo(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return ts(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),es(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return ts(t),e.invoke(r,i,o,s,a)}finally{es(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Xo(t),Jo(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,$o,Qo,Qo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Qo(){}const $o={};function Jo(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Xo(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ts(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function es(t){t._nesting--,Jo(t)}class ns{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Co,this.onMicrotaskEmpty=new Co,this.onStable=new Co,this.onError=new Co}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let rs=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zo.assertNotInAngularZone(),Yo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yo(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Dt(Zo))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),is=(()=>{class t{constructor(){this._applications=new Map,as.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return as.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();class os{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ss,as=new os,cs=function(t,e,n){const r=t.get(zo,[]).concat(e),i=new ko(n);if(0===mi.size)return Promise.resolve(i);const o=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(r.map(t=>t.providers));if(0===o.length)return Promise.resolve(i);const s=function(){const t=gt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),a=gi.create({providers:o}).get(s.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(a.get(t)))(t);n.set(t,e=r.then(vi))}return e}return mi.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const o=t.styleUrls,s=t.styles||(t.styles=[]),a=t.styles.length;o&&o.forEach((e,n)=>{s.push(""),i.push(r(e).then(r=>{s[a+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});const c=Promise.all(i).then(()=>function(t){yi.delete(t)}(n));e.push(c)}),mi=new Map,Promise.all(e).then(()=>{})}().then(()=>i)};const us=new Et("AllowMultipleToken");function ls(t,e,n=[]){const r="Platform: "+e,i=new Et(r);return(e=[])=>{let o=hs();if(!o||o.injector.get(us,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ni,useValue:"platform"});!function(t){if(ss&&!ss.destroyed&&!ss.injector.get(us,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ss=t.get(fs);const e=t.get(xo,null);e&&e.forEach(t=>t())}(gi.create({providers:t,name:r}))}return function(t){const e=hs();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function hs(){return ss&&!ss.destroyed?ss:null}let fs=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ns:("zone.js"===t?void 0:t)||new Zo({enableLongStackTrace:In(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Zo,useValue:n}];return n.run(()=>{const e=gi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(kn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>gs(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Oi(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Io);return t.runInitializers(),t.donePromise.then(()=>(To(i.injector.get(Fo,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ds({},e);return cs(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ps);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${st(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Dt(gi))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();function ds(t,e){return Array.isArray(e)?e.reduce(ds,t):Object.assign(Object.assign({},t),e)}let ps=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=In(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Zo.assertNotInAngularZone(),Yo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Zo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];var i;return(i=r)&&"function"==typeof i.schedule?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:function(t=Number.POSITIVE_INFINITY){return function t(e,n,r=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(t((t,r)=>{return(i=e(t,r),i instanceof v?i:new v(N(i))).pipe(function(t,e){return function(e){return e.lift(new O(t,void 0))}}((e,i)=>n(t,e,r,i)));var i},r)):("number"==typeof n&&(r=n),t=>t.lift(new D(e,r)))}(y,t)}(e)(function(t,e){return e?function(t,e){return new v(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}(t,e):new v(C(t))}(t,n))}(s,a.pipe(t=>{return M()((e=V,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,H);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Pi?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Lt),i=n.create(gi.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(rs,null);return o&&i.injector.get(is).registerApplication(i.location.nativeElement,o),this._loadComponent(i),In()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;gs(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Po,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),gs(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Dt(Zo),Dt(Mo),Dt(gi),Dt(kn),Dt(Fi),Dt(Io))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();function gs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ms=ls(null,"core",[{provide:Do,useValue:"unknown"},{provide:fs,deps:[gi]},{provide:is,deps:[]},{provide:Mo,deps:[]}]),ys=[{provide:ps,useClass:ps,deps:[Zo,Mo,gi,kn,Fi,Io]},{provide:fo,deps:[Zo],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Io,useClass:Io,deps:[[new W,Ao]]},{provide:Wo,useClass:Wo,deps:[]},Ro,{provide:to,useFactory:function(){return ro},deps:[]},{provide:eo,useFactory:function(){return io},deps:[]},{provide:Fo,useFactory:function(t){return To(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new B(Fo),new W,new q]]},{provide:Lo,useValue:"USD"}];let vs=(()=>{class t{constructor(t){}}return t.\u0275mod=Qt({type:t}),t.\u0275inj=$({factory:function(e){return new(e||t)(Dt(ps))},providers:ys}),t})(),_s=null;function bs(){return _s}const Ss=new Et("DocumentToken"),Ts=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}();class Es{}let ws=(()=>{class t extends Es{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=_o(e);if(n)return n;const r=e.split("-")[0];if(n=_o(r),n)return n;if("en"===r)return yo;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[bo.PluralCase]}(e||this.locale)(t)){case Ts.Zero:return"zero";case Ts.One:return"one";case Ts.Two:return"two";case Ts.Few:return"few";case Ts.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Dt(Fo))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),ks=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Cs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){As("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){As("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ci(ao),Ci(oo))},t.\u0275dir=Jt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Cs{constructor(){this.$implicit=null,this.ngIf=null}}function As(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${st(e)}'.`)}let Is=(()=>{class t{}return t.\u0275mod=Qt({type:t}),t.\u0275inj=$({factory:function(e){return new(e||t)},providers:[{provide:Es,useClass:ws}]}),t})();class Ns extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Ns,_s||(_s=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Os||(Os=document.querySelector("base"),Os)?Os.getAttribute("href"):null;return null==e?null:(n=e,Rs||(Rs=document.createElement("a")),Rs.setAttribute("href",n),"/"===Rs.pathname.charAt(0)?Rs.pathname:"/"+Rs.pathname);var n}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Rs,Os=null;const xs=new Et("TRANSITION_ID"),Ds=[{provide:Ao,useFactory:function(t,e,n){return()=>{n.get(Io).donePromise.then(()=>{const n=bs();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[xs,Ss,gi],multi:!0}];class Ps{static init(){var t;t=new Ps,as=t}addToWindow(t){gt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},gt.getAllAngularTestabilities=()=>t.getAllTestabilities(),gt.getAllAngularRootElements=()=>t.getAllRootElements(),gt.frameworkStabilizers||(gt.frameworkStabilizers=[]),gt.frameworkStabilizers.push(t=>{const e=gt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?bs().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Ms=new Et("EventManagerPlugins");let Fs=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Dt(Ms),Dt(Zo))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();class Ls{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=bs().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let js=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})(),Hs=(()=>{class t extends js{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>bs().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Dt(Ss))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const Us={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vs=/%COMP%/g;function Gs(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Gs(t,i,n):(i=i.replace(Vs,t),n.push(i))}return n}function Ks(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bs=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ws(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Gt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new zs(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Gt.Native:case Gt.ShadowDom:return new qs(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Gs(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Dt(Fs),Dt(Hs),Dt(No))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();class Ws{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Us[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Us[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Us[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Ui.DashCase?t.style.setProperty(e,n,r&Ui.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ui.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ks(n)):this.eventManager.addEventListener(t,e,Ks(n))}}class zs extends Ws{constructor(t,e,n,r){super(t),this.component=n;const i=Gs(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Vs,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Vs,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class qs extends Ws{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Gt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Gs(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ys=(()=>{class t extends Ls{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Dt(Ss))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const Zs=["alt","control","meta","shift"],Qs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$s={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Js={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Xs=(()=>{class t extends Ls{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bs().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Zs.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&$s.hasOwnProperty(e)&&(e=$s[e]))}return Qs[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Zs.forEach(r=>{r!=n&&(0,Js[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Dt(Ss))},t.\u0275prov=Q({token:t,factory:t.\u0275fac}),t})();const ta=ls(ms,"browser",[{provide:Do,useValue:"browser"},{provide:xo,useValue:function(){Ns.makeCurrent(),Ps.init()},multi:!0},{provide:Ss,useFactory:function(){return function(t){ue=t}(document),document},deps:[]}]),ea=[[],{provide:ni,useValue:"root"},{provide:kn,useFactory:function(){return new kn},deps:[]},{provide:Ms,useClass:Ys,multi:!0,deps:[Ss,Zo,Do]},{provide:Ms,useClass:Xs,multi:!0,deps:[Ss]},[],{provide:Bs,useClass:Bs,deps:[Fs,Hs,No]},{provide:Hi,useExisting:Bs},{provide:js,useExisting:Hs},{provide:Hs,useClass:Hs,deps:[Ss]},{provide:rs,useClass:rs,deps:[Zo]},{provide:Fs,useClass:Fs,deps:[Ms,Zo]},[]];let na=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:No,useValue:e.appId},{provide:xs,useExisting:No},Ds]}}}return t.\u0275mod=Qt({type:t}),t.\u0275inj=$({factory:function(e){return new(e||t)(Dt(t,12))},providers:ea,imports:[Is,vs]}),t})();"undefined"!=typeof window&&window;var ra=n("MgzW"),ia=n.n(ra),oa=function(t){return null!=t&&"function"==typeof t.then};function sa(t){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t,e){return!(!ha(t)||!ha(e))&&t.slice(0,e.length)===e}function ca(t,e,n){var r=n;try{var i=e.split("."),o=t;i.forEach((function(t){return o=o[t]})),void 0!==o&&(r=o)}catch(s){}return r}function ua(t,e){if(Array.isArray(t)&&"function"==typeof e)for(var n=0;n<t.length;n++)if(!0===e(t[n],n,t))return n;return-1}function la(t,e){var n;if(ga(t))for(var r=Object.keys(t),i=0;i<r.length&&!n;i++){var o=r[i];e(t[o],o,t)&&(n=t[o])}else if(Array.isArray(t))for(var s=0;s<t.length&&!n;s++)e(t[s],s,t)&&(n=t[s]);return n}function ha(t){return"string"==typeof t||t instanceof String}function fa(t){return t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&(Number.isFinite?Number.isFinite(t):isFinite(t))}function da(t){return t instanceof Number&&(t=t.valueOf()),t!=t}var pa=-1;function ga(t){return t&&"object"===sa(t)&&t.constructor===Object}function ma(t,e){var n=t;ga(e)&&Object.keys(e).forEach((function(t){var r=e[t];ga(r)&&(r=n[t]&&ga(n[t])?ma({},n[t],r):ma({},r)),void 0!==r&&(n[t]=r)}));for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(i&&i.length){var s=i.splice(0,1)[0];n=ma.apply(void 0,[n,s].concat(i))}return n}function ya(t){var e={};return t.filter((function(t){return!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=!0)}))}function va(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map((function(t){return ha(t)?t:""}))+"";var e=t+"";return"0"===e&&1/t===Number.NEGATIVE_INFINITY?"-0":e}function _a(t){if("number"==typeof t)return t;if(ga(t)&&"function"==typeof t.valueOf){var e=t.valueOf();t=ga(e)?e+"":e}return"string"!=typeof t?0===t?t:+t:+(t=t.replace(/^\s+|\s+$/g,""))}function ba(t,e){return Object.keys(t).forEach((function(n){return e(t[n],n,t)})),t}function Sa(t){return!0===t||!1===t}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wa(t,e,n){return e&&Ea(t.prototype,e),n&&Ea(t,n),t}var ka={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"},Ca=ka.DEBUG,Aa=function(t){Ca=t},Ia={showLevel:!0,displayAllErrors:!1},Na=function(){function t(e,n){Ta(this,t),this.category=e,this.options=ia()({},Ia,n)}return wa(t,[{key:"debug",value:function(t){this._shouldLog(ka.DEBUG)&&this._log(ka.DEBUG,t)}},{key:"info",value:function(t){this._shouldLog(ka.INFO)&&this._log(ka.INFO,t)}},{key:"warn",value:function(t){this._shouldLog(ka.WARN)&&this._log(ka.WARN,t)}},{key:"error",value:function(t){(this.options.displayAllErrors||this._shouldLog(ka.ERROR))&&this._log(ka.ERROR,t)}},{key:"_log",value:function(t,e){var n=this._generateLogMessage(t,e);console.log(n)}},{key:"_generateLogMessage",value:function(t,e){var n="";return this.options.showLevel&&(n+="["+t+"]"+(t===ka.INFO||t===ka.WARN?" ":"")+" "),this.category&&(n+=this.category+" => "),n+e}},{key:"_shouldLog",value:function(t){var e=Ca,n=Object.keys(ka).map((function(t){return ka[t]}));return n.indexOf(t)>=n.indexOf(e)}}]),t}();function Ra(){var t="__SPLITSOFTWARE__";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}var Oa=function(t){return!!la(ka,(function(e){return t===e}))},xa={showLevel:!0,displayAllErrors:!1},Da=!1;"undefined"!=typeof process&&void 0!==process.version&&process.version&&(Da=!0);var Pa=String(Da?process.env.SPLITIO_DEBUG:Ra()?localStorage.getItem("splitio_debug"):""),Ma=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Na(t,ma(e,xa))},Fa=Ma("splitio-utils:logger"),La={enable:function(){Aa(ka.DEBUG)},setLogLevel:function(t){Oa(t)?Aa(t):Fa.error("Invalid Log Level - No changes to the logs will be applied.")},disable:function(){Aa(ka.NONE)},LogLevel:ka};/^(enabled?|on)/i.test(Pa)?La.enable(ka.DEBUG):Oa(Pa)?La.setLogLevel(Pa):La.disable();var ja=Ma,Ha=ja("",{displayAllErrors:!0}),Ua={};function Va(t){Ua[t]&&Ua[t]--,0===Ua[t]&&delete Ua[t]}var Ga=ja(""),Ka=ja(""),Ba=/^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/;function Wa(t,e){if(null==t)Ka.error("".concat(e,": you passed a null or undefined event_type, event_type must be a non-empty string."));else if(ha(t))if(0===t.length)Ka.error("".concat(e,": you passed an empty event_type, event_type must be a non-empty string."));else{if(Ba.test(t))return t;Ka.error("".concat(e,': you passed "').concat(t,'", event_type must adhere to the regular expression /^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/g. This means an event_type must be alphanumeric, cannot be more than 80 characters long, and can only include a dash, underscore, period, or colon as separators of alphanumeric characters.'))}else Ka.error("".concat(e,": you passed an invalid event_type, event_type must be a non-empty string."));return!1}var za=ja("");function qa(t,e){return fa(t)||null==t?t:(za.error("".concat(e,": value must be a finite number.")),!1)}var Ya=ja("");function Za(t,e){if(null==t)return{properties:null,size:1024};if(!ga(t))return Ya.error("".concat(e,": properties must be a plain object.")),{properties:!1,size:1024};var n=Object.keys(t),r=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n}(t),i={properties:r,size:1024};n.length>300&&Ya.warn("".concat(e,": Event has more than 300 properties. Some of them will be trimmed when processed."));for(var o=0;o<n.length;o++){i.size+=2*n[o].length;var s=r[n[o]],a=ha(s),c=fa(s),u=Sa(s),l=null===s;if(a||c||u||l||(r[n[o]]=null,s=null,l=!0,Ya.warn("".concat(e,": Property ").concat(n[o]," is of invalid type. Setting value to null."))),l?i.size+=0:c?i.size+=8:u?i.size+=4:a&&(i.size+=2*s.length),i.size>32768){Ya.error("".concat(e,": The maximum size allowed for the properties is 32768 bytes, which was exceeded. Event not queued.")),i.properties=!1;break}}return i}var Qa=ja("");function $a(t,e,n){if(null==t)return Qa.error("".concat(e,": you passed a null or undefined ").concat(n,", ").concat(n," must be a non-empty string.")),!1;if(fa(t))return Qa.warn("".concat(e,": ").concat(n,' "').concat(t,'" is not of type string, converting.')),va(t);if(ha(t)){if((t=t.trim()).length>0&&t.length<=250)return t;0===t.length?Qa.error("".concat(e,": you passed an empty string, ").concat(n," must be a non-empty string.")):t.length>250&&Qa.error("".concat(e,": ").concat(n," too long, ").concat(n," must be 250 characters or less."))}else Qa.error("".concat(e,": you passed an invalid ").concat(n," type, ").concat(n," must be a non-empty string."));return!1}function Ja(t,e){if(ga(t)){var n=$a(t.matchingKey,e,"matchingKey"),r=$a(t.bucketingKey,e,"bucketingKey");return n&&r?{matchingKey:n,bucketingKey:r}:(Qa.error("".concat(e,": Key must be an object with bucketingKey and matchingKey with valid string properties.")),!1)}return $a(t,e,"key")}var Xa=ja(""),tc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/;function ec(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"split name";if(null==t)Xa.error("".concat(e,": you passed a null or undefined ").concat(n,", ").concat(n," must be a non-empty string."));else if(ha(t)){if(tc.test(t)&&(Xa.warn("".concat(e,": ").concat(n,' "').concat(t,'" has extra whitespace, trimming.')),t=t.trim()),t.length>0)return t;Xa.error("".concat(e,": you passed an empty ").concat(n,", ").concat(n," must be a non-empty string."))}else Xa.error("".concat(e,": you passed an invalid ").concat(n,", ").concat(n," must be a non-empty string."));return!1}function nc(t,e,n,r){return!t.get(t.constants.READY,!0)||"definition not found"!==n&&null!=n||(Xa.warn("".concat(r,': you passed "').concat(e,'" that does not exist in this environment, please double check what Splits exist in the web console.')),!1)}var rc=ja("");function ic(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"split_names",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"split name";if(Array.isArray(t)&&t.length>0){var i=[];if(t.forEach((function(t){var n=ec(t,e,r);n&&i.push(n)})),i.length)return ya(i)}return rc.error("".concat(e,": ").concat(n," must be a non-empty array.")),!1}var oc="standalone",sc="producer",ac="consumer",cc="control",uc={treatment:cc,config:null},lc=[{type:"byName",maxLength:400,queryParam:"names="},{type:"byPrefix",maxLength:50,queryParam:"prefixes="}],hc=ja(""),fc=/[A-Z]/;function dc(t,e){if(null==t)hc.error("".concat(e,": you passed a null or undefined traffic_type_name, traffic_type_name must be a non-empty string."));else if(ha(t)){if(0!==t.length)return fc.test(t)&&(hc.warn("".concat(e,": traffic_type_name should be all lowercase - converting string to lowercase.")),t=t.toLowerCase()),t;hc.error("".concat(e,": you passed an empty traffic_type_name, traffic_type_name must be a non-empty string."))}else hc.error("".concat(e,": you passed an invalid traffic_type_name, traffic_type_name must be a non-empty string."));return!1}function pc(t,e){hc.warn("".concat(t,": Traffic Type ").concat(e," does not have any corresponding Splits in this environment, make sure you're tracking your events to a valid traffic type defined in the Split console."))}function gc(t,e,n){var r=e.get(e.constants.READY,!0),i=e.get(e.constants.SETTINGS),o=e.get(e.constants.STORAGE).splits;if(!r||"localhost"===i.mode)return!0;var s=o.trafficTypeExists(t);return oa(s)?s.then((function(e){return e||pc(n,t),e})):s||pc(n,t),s}var mc=ja("",{displayAllErrors:!0});function yc(t){return!t.get(t.constants.DESTROYED,!0)||(mc.error("Client has already been destroyed - no calls possible."),!1)}function vc(t,e){return!(!t.get(t.constants.READY,!0)&&!t.get(t.constants.READY_FROM_CACHE,!0)&&(mc.warn("".concat(e,": the SDK is not ready, results may be incorrect. Make sure to wait for SDK readiness before using this method.")),1))}var _c=function(t){var e=t.conditions,n=la(e,(function(t){return"ROLLOUT"===t.conditionType}));return n||(n=e[0]),n?n.partitions.map((function(t){return t.treatment})):[]},bc=function(t){var e;try{e=JSON.parse(t)}catch(n){return null}return null==e?null:{name:e.name,trafficType:e.trafficTypeName||null,killed:e.killed,changeNumber:e.changeNumber||0,treatments:_c(e),configs:e.configurations||{}}},Sc=function(t){var e=[];return t.forEach((function(t){var n=bc(t);null!=n&&e.push(n)})),e},Tc=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++)for(var n=t[e].matcherGroup.matchers,r=0;r<n.length;r++)if("IN_SEGMENT"===n[r].matcherType)return!0;return!1};function Ec(t,e,n){var r=this,i=this.getSplit(t);return(oa(i)?i:Promise.resolve(i)).then((function(i){if(i){var o=JSON.parse(i);if(!o.changeNumber||o.changeNumber<n){o.killed=!0,o.defaultTreatment=e,o.changeNumber=n;var s=JSON.stringify(o);return r.addSplit(t,s)}}return!1}))}var wc=function(){function t(){Ta(this,t),this.flush()}return wa(t,[{key:"addSplit",value:function(t,e){var n=this.getSplit(t);if(n){var r=JSON.parse(n);if(r.trafficTypeName){var i=r.trafficTypeName;this.ttCache[i]--,this.ttCache[i]||delete this.ttCache[i]}Tc(r.conditions)&&this.splitsWithSegmentsCount--}var o=JSON.parse(e);if(o){this.splitCache[t]=e;var s=o.trafficTypeName;return s&&(this.ttCache[s]||(this.ttCache[s]=0),this.ttCache[s]++),Tc(o.conditions)&&this.splitsWithSegmentsCount++,!0}return!1}},{key:"addSplits",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.addSplit(t[0],t[1]))})),n}},{key:"removeSplit",value:function(t){var e=this.getSplit(t);if(e){delete this.splitCache[t];var n=JSON.parse(e),r=n.trafficTypeName;return r&&(this.ttCache[r]--,this.ttCache[r]||delete this.ttCache[r]),Tc(n.conditions)&&this.splitsWithSegmentsCount--,1}return 0}},{key:"removeSplits",value:function(t){var e=this;return t.forEach((function(t){return e.removeSplit(t)})),t.length}},{key:"getSplit",value:function(t){return this.splitCache[t]}},{key:"setChangeNumber",value:function(t){return this.changeNumber=t,!0}},{key:"getChangeNumber",value:function(){return this.changeNumber}},{key:"getAll",value:function(){var t=this;return this.getKeys().map((function(e){return t.splitCache[e]}))}},{key:"getKeys",value:function(){return Object.keys(this.splitCache)}},{key:"trafficTypeExists",value:function(t){return fa(this.ttCache[t])&&this.ttCache[t]>0}},{key:"usesSegments",value:function(){return-1===this.getChangeNumber()||this.splitsWithSegmentsCount>0}},{key:"flush",value:function(){this.splitCache={},this.ttCache={},this.changeNumber=-1,this.splitsWithSegmentsCount=0}},{key:"fetchMany",value:function(t){var e=this,n={};return t.forEach((function(t){n[t]=e.splitCache[t]||null})),n}},{key:"checkCache",value:function(){return!1}}]),t}();wc.prototype.killLocally=Ec;var kc=wc,Cc=ja("splitio-storage:localstorage"),Ac=function(){function t(e,n,r){Ta(this,t),this.keys=e,this.splitFiltersValidation=r,this.__checkExpiration(n),this.__checkFilterQuery()}return wa(t,[{key:"decrementCount",value:function(t){var e=_a(localStorage.getItem(t))-1;e>0?localStorage.setItem(t,e):localStorage.removeItem(t)}},{key:"decrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=this.keys.buildTrafficTypeKey(t.trafficTypeName);this.decrementCount(e)}if(Tc(t.conditions)){var n=this.keys.buildSplitsWithSegmentCountKey();this.decrementCount(n)}}}catch(r){Cc.error(r)}}},{key:"incrementCounts",value:function(t){try{if(t){if(t.trafficTypeName){var e=this.keys.buildTrafficTypeKey(t.trafficTypeName);localStorage.setItem(e,_a(localStorage.getItem(e))+1)}if(Tc(t.conditions)){var n=this.keys.buildSplitsWithSegmentCountKey();localStorage.setItem(n,_a(localStorage.getItem(n))+1)}}}catch(r){Cc.error(r)}}},{key:"addSplit",value:function(t,e){try{var n=this.keys.buildSplitKey(t),r=localStorage.getItem(n),i=r?JSON.parse(r):null;this.decrementCounts(i),localStorage.setItem(n,e);var o=e?JSON.parse(e):null;return this.incrementCounts(o),!0}catch(s){return Cc.error(s),!1}}},{key:"addSplits",value:function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.addSplit(t[0],t[1]))})),n}},{key:"removeSplit",value:function(t){try{var e=this.getSplit(t);localStorage.removeItem(this.keys.buildSplitKey(t));var n=JSON.parse(e);return this.decrementCounts(n),1}catch(r){return Cc.error(r),0}}},{key:"removeSplits",value:function(t){for(var e=0,n=t.length,r=0;e<n;e++)r+=this.removeSplit(t[e]);return r}},{key:"getSplit",value:function(t){return localStorage.getItem(this.keys.buildSplitKey(t))}},{key:"setChangeNumber",value:function(t){if(this.cacheReadyButNeedsToFlush&&(this.flush(),this.cacheReadyButNeedsToFlush=!1),this.updateNewFilter){Cc.info("Split filter query was modified. Updating cache.");var e=this.keys.buildSplitsFilterQueryKey(),n=this.splitFiltersValidation.queryString;try{n?localStorage.setItem(e,n):localStorage.removeItem(e)}catch(r){Cc.error(r)}this.updateNewFilter=!1}try{return localStorage.setItem(this.keys.buildSplitsTillKey(),t+""),localStorage.setItem(this.keys.buildLastUpdatedKey(),Date.now()+""),this.hasSync=!0,!0}catch(r){return Cc.error(r),!1}}},{key:"getChangeNumber",value:function(){var t=localStorage.getItem(this.keys.buildSplitsTillKey());return null!==t?da(t=parseInt(t,10))?-1:t:-1}},{key:"getAll",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n),i=r&&localStorage.getItem(r);null!=r&&this.keys.isSplitKey(r)&&i&&e.push(i),n++}return e}},{key:"getKeys",value:function(){for(var t=localStorage.length,e=[],n=0;n<t;){var r=localStorage.key(n);null!=r&&this.keys.isSplitKey(r)&&e.push(this.keys.extractKey(r)),n++}return e}},{key:"trafficTypeExists",value:function(t){var e=_a(localStorage.getItem(this.keys.buildTrafficTypeKey(t)));return fa(e)&&e>0}},{key:"usesSegments",value:function(){if(!this.hasSync)return!0;var t=localStorage.getItem(this.keys.buildSplitsWithSegmentCountKey()),e=null===t?0:_a(t);return!fa(e)||e>0}},{key:"flush",value:function(){Cc.info("Flushing Splits data from localStorage");for(var t=localStorage.length,e=[],n=0;n<t;n++){var r=localStorage.key(n);null!=r&&this.keys.isSplitCacheKey(r)&&e.push(r)}e.forEach((function(t){localStorage.removeItem(t)})),this.hasSync=!1}},{key:"fetchMany",value:function(t){var e=this,n={};return t.forEach((function(t){n[t]=localStorage.getItem(e.keys.buildSplitKey(t))})),n}},{key:"checkCache",value:function(){return this.getChangeNumber()>-1||this.cacheReadyButNeedsToFlush}},{key:"__checkExpiration",value:function(t){var e=localStorage.getItem(this.keys.buildLastUpdatedKey());null!==e&&!da(e=parseInt(e,10))&&e<t&&this.flush()}},{key:"__checkFilterQuery",value:function(){var t=this,e=this.splitFiltersValidation,n=e.queryString,r=e.groupedFilters,i=this.keys.buildSplitsFilterQueryKey();if(localStorage.getItem(i)!==n)try{this.updateNewFilter=!0,this.checkCache()&&(localStorage.setItem(this.keys.buildSplitsTillKey(),"-1"),this.getKeys().forEach((function(e){n&&(r.byName.indexOf(e)>-1||r.byPrefix.some((function(t){return e.startsWith(t+"__")})))?t.cacheReadyButNeedsToFlush=!0:t.removeSplit(e)})))}catch(o){Cc.error(o)}}}]),t}();Ac.prototype.killLocally=Ec;var Ic=Ac,Nc=function(){function t(e){Ta(this,t),this.keys=e,this.flush()}return wa(t,[{key:"flush",value:function(){this.segmentCache={}}},{key:"addToSegment",value:function(t){var e=this.keys.buildSegmentNameKey(t);return this.segmentCache[e]=!0,!0}},{key:"removeFromSegment",value:function(t){var e=this.keys.buildSegmentNameKey(t);return delete this.segmentCache[e],!0}},{key:"resetSegments",value:function(t){var e,n=this,r=!1,i=Object.keys(this.segmentCache);if(0===t.length&&i.length===t.length)return r;if(i.length!==t.length)r=!0,this.segmentCache={},t.forEach((function(t){n.addToSegment(t)}));else{for(e=0;e<t.length&&this.isInSegment(t[e]);e++);e<t.length&&(r=!0,this.segmentCache={},t.forEach((function(t){n.addToSegment(t)})))}return r}},{key:"isInSegment",value:function(t){var e=this.keys.buildSegmentNameKey(t);return!0===this.segmentCache[e]}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:function(){return-1}},{key:"registerSegment",value:function(){return!1}},{key:"registerSegments",value:function(){return!1}},{key:"getRegisteredSegments",value:function(){return[]}}]),t}(),Rc=ja("splitio-storage:localstorage"),Oc=function(){function t(e){Ta(this,t),this.keys=e}return wa(t,[{key:"addToSegment",value:function(t){var e=this.keys.buildSegmentNameKey(t);try{return localStorage.setItem(e,"1"),!0}catch(n){return Rc.error(n),!1}}},{key:"removeFromSegment",value:function(t){var e=this.keys.buildSegmentNameKey(t);try{return localStorage.removeItem(e),!0}catch(n){return Rc.error(n),!1}}},{key:"resetSegments",value:function(t){var e,n=this,r=!1,i=Object.keys(localStorage).reduce((function(t,e){var r=n.keys.extractSegmentName(e);return r&&t.push(r),t}),[]);if(0===t.length&&i.length===t.length)return r;if(i.length!==t.length)r=!0,i.forEach((function(t){return n.removeFromSegment(t)})),t.forEach((function(t){return n.addToSegment(t)}));else{for(e=0;e<t.length&&-1!==i.indexOf(t[e]);e++);e<t.length&&(r=!0,i.forEach((function(t){return n.removeFromSegment(t)})),t.forEach((function(t){return n.addToSegment(t)})))}return r}},{key:"isInSegment",value:function(t){return"1"===localStorage.getItem(this.keys.buildSegmentNameKey(t))}},{key:"setChangeNumber",value:function(){return!0}},{key:"getChangeNumber",value:function(){return-1}},{key:"registerSegment",value:function(){return!1}},{key:"registerSegments",value:function(){return!1}},{key:"getRegisteredSegments",value:function(){return[]}},{key:"flush",value:function(){Rc.info("Flushing MySegments data from localStorage"),this.resetSegments([])}}]),t}();function xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dc=function(){function t(){Ta(this,t),this.queue=[]}return wa(t,[{key:"state",value:function(){return this.queue}},{key:"track",value:function(t){var e,n;return(e=this.queue).push.apply(e,function(t){if(Array.isArray(t))return xc(t)}(n=t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return xc(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xc(t,void 0):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this}},{key:"clear",value:function(){return this.queue.length=0,this}},{key:"toJSON",value:function(){return this.queue}},{key:"isEmpty",value:function(){return 0===this.queue.length}}]),t}(),Pc=(function(t,e){for(var n=0,r=t.length-1,i=Math.floor((r+n)/2),o=n,s=r;t[i]!==e&&n<r;)e<t[i]?r=i-1:e>t[i]&&(n=i+1),i=Math.floor((r+n)/2);return i<o?i=o:i>s&&(i=s),e<t[i]&&i>o?i-1:i}).bind(null,[1,1.5,2.25,3.38,5.06,7.59,11.39,17.09,25.63,38.44,57.67,86.5,129.75,194.62,291.93,437.89,656.84,985.26,1477.89,2216.84,3325.26,4987.89,77481.83]),Mc=function(){function t(){Ta(this,t),this.clear()}return wa(t,[{key:"clear",value:function(){return this.counters={},this}},{key:"state",value:function(){return this.counters}},{key:"track",value:function(t,e){return void 0===this.counters[t]&&(this.counters[t]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.counters[t][Pc(e)]++,this}},{key:"isEmpty",value:function(){return 0===Object.keys(this.counters).length}},{key:"toJSON",value:function(){return this.counters}}]),t}(),Fc=function(){function t(){Ta(this,t),this.clear()}return wa(t,[{key:"clear",value:function(){return this.counters={},this}},{key:"state",value:function(){return this.counters}},{key:"track",value:function(t){return void 0===this.counters[t]?this.counters[t]=1:this.counters[t]++,this.counters[t]}},{key:"isEmpty",value:function(){return 0===Object.keys(this.counters).length}},{key:"toJSON",value:function(){return this.counters}}]),t}(),Lc=function(){function t(e){var n=this;Ta(this,t);var r=e.get(e.constants.SETTINGS),i=e.get(e.constants.EVENTS);this.onFullQueue=!1,this.maxQueue=r.scheduler.eventsQueueSize,this.queue=[],this.queueByteSize=0,oa(i)?i.then((function(t){n.onFullQueue=t.flushAndResetTimer,n._checkForFlush()})):"function"==typeof i.flushAndResetTimer&&(this.onFullQueue=i.flushAndResetTimer)}return wa(t,[{key:"state",value:function(){return this.queue}},{key:"track",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.queueByteSize+=e,this.queue.push(t),this._checkForFlush(),!0}},{key:"clear",value:function(){return this.queue=[],this.queueByteSize=0,this}},{key:"toJSON",value:function(){return this.queue}},{key:"isEmpty",value:function(){return 0===this.queue.length}},{key:"_checkForFlush",value:function(){(this.queueByteSize>5242880||this.maxQueue>0&&this.queue.length>=this.maxQueue)&&this.onFullQueue&&this.onFullQueue()}}]),t}(),jc=/[^.]+$/,Hc=/count\.([^/]+)$/,Uc=/latency\.([^/]+)\.bucket\.([0-9]+)$/,Vc=function(){function t(e){Ta(this,t),this.settings=e}return wa(t,[{key:"buildSplitKey",value:function(t){return"".concat(this.settings.storage.prefix,".split.").concat(t)}},{key:"buildTrafficTypeKey",value:function(t){return"".concat(this.settings.storage.prefix,".trafficType.").concat(t)}},{key:"buildSplitsTillKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.till")}},{key:"buildSplitsReady",value:function(){return"".concat(this.settings.storage.prefix,".splits.ready")}},{key:"isSplitKey",value:function(t){return aa(t,"".concat(this.settings.storage.prefix,".split."))}},{key:"buildSegmentNameKey",value:function(t){return"".concat(this.settings.storage.prefix,".segment.").concat(t)}},{key:"buildSegmentTillKey",value:function(t){return"".concat(this.settings.storage.prefix,".segment.").concat(t,".till")}},{key:"buildRegisteredSegmentsKey",value:function(){return"".concat(this.settings.storage.prefix,".segments.registered")}},{key:"buildSegmentsReady",value:function(){return"".concat(this.settings.storage.prefix,".segments.ready")}},{key:"buildVersionablePrefix",value:function(){return"".concat(this.settings.storage.prefix,"/").concat(this.settings.version,"/").concat(this.settings.runtime.ip)}},{key:"buildImpressionsKey",value:function(){return"".concat(this.settings.storage.prefix,".impressions")}},{key:"buildEventsKey",value:function(){return"".concat(this.settings.storage.prefix,".events")}},{key:"buildLatencyKeyPrefix",value:function(){return"".concat(this.buildVersionablePrefix(),"/latency")}},{key:"buildLatencyKey",value:function(t,e){return"".concat(this.buildLatencyKeyPrefix(),".").concat(t,".bucket.").concat(e)}},{key:"buildCountKey",value:function(t){return"".concat(this.buildVersionablePrefix(),"/count.").concat(t)}},{key:"buildGaugeKey",value:function(t){return"".concat(this.buildVersionablePrefix(),"/gauge.").concat(t)}},{key:"searchPatternForCountKeys",value:function(){return"".concat(this.buildVersionablePrefix(),"/count.*")}},{key:"searchPatternForSplitKeys",value:function(){return"".concat(this.settings.storage.prefix,".split.*")}},{key:"searchPatternForLatency",value:function(){return"".concat(this.buildLatencyKeyPrefix(),".*")}},{key:"extractKey",value:function(t){var e=t.match(jc);if(e&&e.length)return e[0];throw"Invalid latency key provided"}},{key:"extractCounterName",value:function(t){var e=t.match(Hc);if(e&&e.length)return e[1];throw"Invalid counter key provided"}},{key:"extractLatencyMetricNameAndBucket",value:function(t){var e=t.match(Uc);if(e&&e.length>2)return{metricName:e[1],bucketNumber:e[2]};throw"Invalid counter key provided"}}]),t}();function Gc(t,e){return(Gc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gc(t,e)}function Bc(t,e){return!e||"object"!==sa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wc(t){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zc(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return ga(n)?n[t]:e?void 0:n}}var qc=zc("matchingKey"),Yc=zc("bucketingKey",!0),Zc=function(t){Kc(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Wc(e);if(n){var i=Wc(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Bc(this,t)});function i(t){var e;return Ta(this,i),(e=r.call(this,t)).regexSplitCacheKey=new RegExp("^".concat(e.settings.storage.prefix,"\\.(splits?|trafficType)\\.")),e}return wa(i,[{key:"buildSegmentNameKey",value:function(t){return"".concat(qc(this.settings.core.key),".").concat(this.settings.storage.prefix,".segment.").concat(t)}},{key:"extractSegmentName",value:function(t){var e="".concat(qc(this.settings.core.key),".").concat(this.settings.storage.prefix,".segment.");if(aa(t,e))return t.substr(e.length)}},{key:"buildSplitsWithSegmentCountKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.usingSegments")}},{key:"buildLastUpdatedKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.lastUpdated")}},{key:"isSplitCacheKey",value:function(t){return this.regexSplitCacheKey.test(t)}},{key:"buildSplitsFilterQueryKey",value:function(){return"".concat(this.settings.storage.prefix,".splits.filterQuery")}}]),i}(Vc),Qc=n("aqdR"),$c=n.n(Qc),Jc={startup:{requestTimeoutBeforeReady:5,retriesOnFailureBeforeReady:1,readyTimeout:10,eventsFirstPushWindow:10}},Xc=ja("splitio-settings"),tu=ja("splitio-settings"),eu=ja(""),nu=n("CfmU"),ru=/^\/(testImpressions|metrics|events)/,iu=/^\/auth/,ou=/^\/(sse|event-stream)/,su={mode:oc,core:{authorizationKey:void 0,key:void 0,trafficType:void 0,labelsEnabled:!0,IPAddressesEnabled:void 0},scheduler:{featuresRefreshRate:30,segmentsRefreshRate:60,metricsRefreshRate:120,impressionsRefreshRate:60,offlineRefreshRate:15,eventsPushRate:60,eventsQueueSize:500,authRetryBackoffBase:1,streamingReconnectBackoffBase:1},urls:{sdk:"https://sdk.split.io/api",events:"https://events.split.io/api",auth:"https://auth.split.io/api",streaming:"https://streaming.split.io"},storage:{type:"MEMORY"},debug:void 0,impressionListener:void 0,version:"".concat("javascript","-").concat(nu.a),integrations:void 0,streamingEnabled:!0,sync:{splitFilters:void 0}};function au(t){return Math.round(1e3*t)}function cu(t){var e,n,r,i,o,s,a,c,u=ma({},su,Jc,t);u.scheduler.featuresRefreshRate=au(u.scheduler.featuresRefreshRate),u.scheduler.segmentsRefreshRate=au(u.scheduler.segmentsRefreshRate),u.scheduler.metricsRefreshRate=au(u.scheduler.metricsRefreshRate),u.scheduler.impressionsRefreshRate=au(u.scheduler.impressionsRefreshRate),u.scheduler.offlineRefreshRate=au(u.scheduler.offlineRefreshRate),u.scheduler.eventsPushRate=au(u.scheduler.eventsPushRate),u.startup.requestTimeoutBeforeReady=au(u.startup.requestTimeoutBeforeReady),u.startup.readyTimeout=au(u.startup.readyTimeout),u.startup.eventsFirstPushWindow=au(u.startup.eventsFirstPushWindow),u.mode=function(t,e){if("localhost"===t)return"localhost";if(-1===[oc,sc,ac].indexOf(e))throw Error("Invalid mode provided");return e}(u.core.authorizationKey,u.mode),u.storage=(o=void 0===(i=(r=(n=u).storage).type)?"MEMORY":i,a=void 0===(s=r.options)?{}:s,(c=r.prefix)?c+=".SPLITIO":c="SPLITIO","localhost"===n.mode?{type:"MEMORY",prefix:c}:(("MEMORY"!==o&&"LOCALSTORAGE"!==o||"LOCALSTORAGE"===o&&!Ra())&&(o="MEMORY",Xc.warn("Invalid or unavailable storage. Fallbacking into MEMORY storage")),{type:o,options:a,prefix:c})),"boolean"==typeof(e=u.debug)?e?La.enable():La.disable():"string"==typeof e&&La.setLogLevel(e),u.runtime={ip:!1,hostname:!1},u.integrations=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.integrations;if(!Array.isArray(n)||0===n.length)return[];var r=n.filter((function(t){return t&&ha(t.type)&&e.indexOf(t.type)>-1})),i=n.length-r.length;return i&&tu.warn("".concat(i," integration ").concat(1===i?"item":"items"," at settings ").concat(1===i?"is":"are"," invalid: integration items must have a valid 'type' value")),r}(t,["GOOGLE_ANALYTICS_TO_SPLIT","SPLIT_TO_GOOGLE_ANALYTICS"])}(u),!1!==u.streamingEnabled&&(u.streamingEnabled=!0,u.scheduler.authRetryBackoffBase=au(u.scheduler.authRetryBackoffBase),u.scheduler.streamingReconnectBackoffBase=au(u.scheduler.streamingReconnectBackoffBase));var l,h,f,d,p=(d={validFilters:[],queryString:null,groupedFilters:{}},(l=u.sync.splitFilters)?u.mode!==oc?(eu.warn("Factory instantiation: split filters have been configured but will have no effect if mode is not '".concat(oc,"', since synchronization is being deferred to an external tool.")),d):Array.isArray(l)&&0!==l.length?(lc.forEach((function(t){d.groupedFilters[t.type]=[]})),d.validFilters=l.filter((function(t,e){return t&&(n=t.type,lc.some((function(t){return t.type===n})))&&Array.isArray(t.values)?(d.groupedFilters[t.type]=d.groupedFilters[t.type].concat(t.values),!0):(eu.warn("Factory instantiation: split filter at position '".concat(e,"' is invalid. It must be an object with a valid filter type ('byName' or 'byPrefix') and a list of 'values'.")),!1);var n})),lc.forEach((function(t){var e=t.type;d.groupedFilters[e].length>0&&(d.groupedFilters[e]=function(t,e,n){var r=ic(e,"Factory instantiation","".concat(t," filter"),"".concat(t," filter value"));if(r){if(r.length>n)throw new Error("".concat(n," unique values can be specified at most for '").concat(t,"' filter. You passed ").concat(r.length,". Please consider reducing the amount or using other filter."));r.sort()}return r||[]}(e,d.groupedFilters[e],t.maxLength))})),d.queryString=(h=d.groupedFilters,f=[],lc.forEach((function(t){var e=h[t.type];e.length>0&&f.push(t.queryParam+e.map((function(t){return encodeURIComponent(t)})).join(","))})),f.length>0?"&"+f.join("&"):null),eu.debug("Factory instantiation: splits filtering criteria is '".concat(d.queryString,"'.")),d):(eu.warn("Factory instantiation: splitFilters configuration must be a non-empty array of filter objects."),d):d);return u.sync.splitFilters=p.validFilters,u.sync.__splitFiltersValidation=p,u}var uu={url:function(t){return ru.test(t)?"".concat(this.urls.events).concat(t):iu.test(t)?"".concat(this.urls.auth).concat(t):ou.test(t)?"".concat(this.urls.streaming).concat(t):"".concat(this.urls.sdk).concat(t)},overrideKeyAndTT:function(t,e){return ia()(Object.create(uu),this,{core:ia()({},this.core,{key:t,trafficType:e})})}},lu={COLLECTORS:"metrics_collectors",DESTROYED:"is_destroyed",EVENTS:"events_publisher",HAS_TIMEDOUT:"has_timedout",INTEGRATIONS_MANAGER:"integrations_manager",MY_SEGMENTS_CHANGE_WORKER:"my_segments_change_worker",PRODUCER:"producer",READINESS:"readiness_gate",READY:"is_ready",READY_FROM_CACHE:"is_ready_from_cache",SETTINGS:"settings",STATUS_MANAGER:"status_manager",STORAGE:"storage"},hu=function(){function t(){Ta(this,t),this._map={},this.constants=lu}return wa(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t&&("string"!=typeof t||t.length)){var n=this._map[t];if(void 0!==n)return n;if(!e){var r,i=new Promise((function(t){return r=t}));return i.manualResolve=r,this._map[t]=i,i}}}},{key:"getAll",value:function(){return ia()({},this._map)}},{key:"put",value:function(t,e){var n=this;if("string"!=typeof t||"string"==typeof t&&!t.length||void 0===e)return!1;var r=this._map[t];return(void 0===r||"function"==typeof r.manualResolve)&&(oa(r)&&r.manualResolve&&r.manualResolve(e),oa(e)&&e.then((function(e){return n._map[t]=e,e})).catch((function(e){return n._map[t]=void 0,e})),this._map[t]=e,!0)}}]),t}(),fu=function(t){return ga(t)?{matchingKey:t.matchingKey,bucketingKey:t.bucketingKey}:{matchingKey:t,bucketingKey:t}};function du(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pu,gu="object"===("undefined"==typeof performance?"undefined":sa(performance))&&"function"==typeof performance.now?performance.now.bind(performance):Date.now,mu=new Na("[TIME TRACKER]",{showLevel:!1}),yu={},vu={SDK_READY:"Getting ready - Split SDK",SDK_GET_TREATMENT:"SDK - Get Treatment",SDK_GET_TREATMENTS:"SDK - Get Treatments",SDK_GET_TREATMENT_WITH_CONFIG:"SDK - Get Treatment with config",SDK_GET_TREATMENTS_WITH_CONFIG:"SDK - Get Treatments with config",SPLITS_READY:"Getting ready - Splits",SEGMENTS_READY:"Getting ready - Segments",METRICS_PUSH:"Pushing - Metrics",IMPRESSIONS_PUSH:"Pushing - Impressions",EVENTS_PUSH:"Pushing - Events",MY_SEGMENTS_FETCH:"Fetching - My Segments",SEGMENTS_FETCH:"Fetching - Segments",SPLITS_FETCH:"Fetching - Splits"},_u=(du(pu={},vu.SDK_READY,{collector:"client",method:"ready"}),du(pu,vu.SDK_GET_TREATMENT,{collector:"client",method:"getTreatment"}),du(pu,vu.SDK_GET_TREATMENTS,{collector:"client",method:"getTreatments"}),du(pu,vu.SDK_GET_TREATMENT_WITH_CONFIG,{collector:"client",method:"getTreatmentWithConfig"}),du(pu,vu.SDK_GET_TREATMENTS_WITH_CONFIG,{collector:"client",method:"getTreatmentsWithConfig"}),du(pu,vu.MY_SEGMENTS_FETCH,{collector:"mySegments",method:"latency"}),du(pu,vu.SEGMENTS_FETCH,{collector:"segmentChanges",method:"latency"}),du(pu,vu.SPLITS_FETCH,{collector:"splitChanges",method:"latency"}),pu),bu=function(t,e){return"string"==typeof e?t+e:t},Su=function(t,e){var n=_u[t];return!(!n||!e)&&e[n.collector]},Tu=function(t,e){var n=_u[t];return!(!n||!e)&&e[n.method]},Eu={__attachToPromise:function(t,e,n,r){var i=this;return t.then((function(t){return i.stop(e,r),n&&n.count&&n.count(t.status),t})).catch((function(t){throw i.stop(e,r),n&&n.countException&&n.countException(),t}))},start:function(t,e,n){var r,i=pa++,o=Su(t,e);oa(n)?r=this.__attachToPromise(n,t,o,i):(r=this.stop.bind(this,t,i),_u[t]&&!o&&(r.setCollectorForTask=this.setCollectorForTask.bind(this,t,i)));var s,a=bu(t,i),c=Tu(t,o);return yu[a]={cb:c,timer:(s=gu(),function(){return Math.round(gu()-s)})},r},setCollectorForTask:function(t,e,n){var r=Su(t,n);if(r){var i=bu(t,e);yu[i].cb=Tu(t,r)}},stop:function(t,e){var n=bu(t,e),r=yu[n];if(r){var i=r.timer();return mu.debug("[".concat(t,"] took ").concat(i,"ms to finish.")),r.cb&&r.cb(i),delete yu[n],i}},TaskNames:vu},wu={ALL:1,SEGMENT:2,WHITELIST:3,EQUAL_TO:4,GREATER_THAN_OR_EQUAL_TO:5,LESS_THAN_OR_EQUAL_TO:6,BETWEEN:7,UNDEFINED:8,EQUAL_TO_SET:9,CONTAINS_ANY_OF_SET:10,CONTAINS_ALL_OF_SET:11,PART_OF_SET:12,ENDS_WITH:13,STARTS_WITH:14,CONTAINS_STRING:15,IN_SPLIT_TREATMENT:16,EQUAL_TO_BOOLEAN:17,MATCHES_STRING:18},ku={BOOLEAN:"BOOLEAN",STRING:"STRING",NUMBER:"NUMBER",SET:"SET",DATETIME:"DATETIME",NOT_SPECIFIED:"NOT_SPECIFIED"},Cu=function(){function t(){var e=this;Ta(this,t),this.__setData__=[];var n=arguments[0];Array.isArray(n)&&n.forEach((function(t){e.add(t)}))}return wa(t,[{key:"clear",value:function(){this.__setData__.length&&(this.__setData__.length=0)}},{key:"add",value:function(t){return this.has(t)||this.__setData__.push(t),this}},{key:"delete",value:function(t){var e=this.__setData__.indexOf(t);return-1!==e&&(this.__setData__.splice(e,1),!0)}},{key:"has",value:function(t){return-1!==this.__setData__.indexOf(t)}},{key:"forEach",value:function(t){var e=arguments[1];if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var n=0;n<this.__setData__.length;n++){var r=this.__setData__[n];t.call(e,r,r,this)}}},{key:"size",get:function(){return this.__setData__.length}}]),t}();function Au(t){return t instanceof Cu?t.__setData__.slice():Array.from(t)}var Iu=Array.from&&Set&&Set.prototype.values?Set:Cu,Nu=function(t){return t.whitelist},Ru=function(t){return t.value};function Ou(t){return new Date(t).setUTCHours(0,0,0,0)}function xu(t){return new Date(t).setUTCSeconds(0,0)}var Du=function(t){var e=t.map((function(t){var e=t.negate,n=t.keySelector,r=t.userDefinedSegmentMatcherData,i=t.whitelistMatcherData,o=t.unaryNumericMatcherData,s=t.betweenMatcherData,a=t.dependencyMatcherData,c=t.booleanMatcherData,u=t.stringMatcherData,l=n&&n.attribute,h=function(t){switch(t){case"ALL_KEYS":return wu.ALL;case"IN_SEGMENT":return wu.SEGMENT;case"WHITELIST":return wu.WHITELIST;case"EQUAL_TO":return wu.EQUAL_TO;case"GREATER_THAN_OR_EQUAL_TO":return wu.GREATER_THAN_OR_EQUAL_TO;case"LESS_THAN_OR_EQUAL_TO":return wu.LESS_THAN_OR_EQUAL_TO;case"BETWEEN":return wu.BETWEEN;case"EQUAL_TO_SET":return wu.EQUAL_TO_SET;case"CONTAINS_ANY_OF_SET":return wu.CONTAINS_ANY_OF_SET;case"CONTAINS_ALL_OF_SET":return wu.CONTAINS_ALL_OF_SET;case"PART_OF_SET":return wu.PART_OF_SET;case"ENDS_WITH":return wu.ENDS_WITH;case"STARTS_WITH":return wu.STARTS_WITH;case"CONTAINS_STRING":return wu.CONTAINS_STRING;case"IN_SPLIT_TREATMENT":return wu.IN_SPLIT_TREATMENT;case"EQUAL_TO_BOOLEAN":return wu.EQUAL_TO_BOOLEAN;case"MATCHES_STRING":return wu.MATCHES_STRING;default:return wu.UNDEFINED}}(t.matcherType),f=ku.STRING,d=void 0;return h===wu.SEGMENT?d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.segmentName}(r):h===wu.WHITELIST?d=function(t){return new Iu(t.whitelist)}(i):h===wu.EQUAL_TO?(d=Ru(o),f=ku.NUMBER,"DATETIME"===o.dataType&&(d=Ou(d),f=ku.DATETIME)):h===wu.GREATER_THAN_OR_EQUAL_TO||h===wu.LESS_THAN_OR_EQUAL_TO?(d=Ru(o),f=ku.NUMBER,"DATETIME"===o.dataType&&(d=xu(d),f=ku.DATETIME)):h===wu.BETWEEN?(d=s,f=ku.NUMBER,"DATETIME"===s.dataType&&(d.start=xu(d.start),d.end=xu(d.end),f=ku.DATETIME)):h===wu.EQUAL_TO_SET||h===wu.CONTAINS_ANY_OF_SET||h===wu.CONTAINS_ALL_OF_SET||h===wu.PART_OF_SET?(d=Nu(i),f=ku.SET):h===wu.STARTS_WITH||h===wu.ENDS_WITH||h===wu.CONTAINS_STRING?d=Nu(i):h===wu.IN_SPLIT_TREATMENT?(d=a,f=ku.NOT_SPECIFIED):h===wu.EQUAL_TO_BOOLEAN?(f=ku.BOOLEAN,d=c):h===wu.MATCHES_STRING&&(d=u),{attribute:l,negate:e,type:h,value:d,dataType:f}}));return-1===ua(e,(function(t){return t.type===wu.UNDEFINED}))?e:[]};function Pu(t,e){if(!(this instanceof Pu))return new Pu(t,e);if(100!==t[t.length-1])throw new RangeError("Provided invalid dataset as input");this._ranges=t,this._treatments=e}Pu.parse=function(t){var e=t.reduce((function(t,e){var n=e.treatment;return t.ranges.push(t.inc+=e.size),t.treatments.push(n),t}),{inc:0,ranges:[],treatments:[]});return new Pu(e.ranges,e.treatments)},Pu.prototype.getTreatmentFor=function(t){if(t<0||t>100)throw new RangeError("Please provide a value between 0 and 100");var e=ua(this._ranges,(function(e){return t<=e}));return this._treatments[e]};var Mu=Pu,Fu=ja("splitio-engine:matcher");function Lu(t){return Fu.debug("[allMatcher] is always true"),null!=t}var ju=ja("splitio-engine:matcher"),Hu=ja("splitio-engine:matcher"),Uu=ja("splitio-engine:matcher"),Vu=ja("splitio-engine:matcher"),Gu=ja("splitio-engine:matcher"),Ku=ja("splitio-engine:matcher"),Bu=ja("splitio-engine:matcher"),Wu=ja("splitio-engine:matcher"),zu=ja("splitio-engine:matcher"),qu=ja("splitio-engine:matcher"),Yu=ja("splitio-engine:matcher"),Zu=ja("splitio-engine:matcher"),Qu=ja("splitio-engine:matcher"),$u=ja("splitio-engine:matcher");function Ju(t,e,n){var r=!1;return Array.isArray(e)&&(r=-1!==e.indexOf(t.treatment)),$u.debug('[dependencyMatcher] Parent split "'.concat(n,'" evaluated to "').concat(t.treatment,'" with label "').concat(t.label,'". ').concat(n," evaluated treatment is part of [").concat(e,"] ? ").concat(r,".")),r}var Xu=ja("splitio-engine:matcher"),tl=ja("splitio-engine:matcher"),el=function(t,e){var n,r,i,o=t.type,s=t.value;return o===wu.ALL?n=Lu:o===wu.SEGMENT?n=function(t,e){return function(n){var r=e.segments.isInSegment(t,n);return oa(r)?r.then((function(e){return ju.debug("[asyncSegmentMatcher] evaluated ".concat(t," / ").concat(n," => ").concat(r)),e})):ju.debug("[segmentMatcher] evaluated ".concat(t," / ").concat(n," => ").concat(r)),r}}(s,e):o===wu.WHITELIST?(i=s,n=function(t){var e=i.has(t);return Hu.debug("[whitelistMatcher] evaluated ".concat(t," in [").concat(Au(i).join(","),"] => ").concat(e)),e}):o===wu.EQUAL_TO?n=function(t){return function(e){var n=e===t;return Uu.debug("[equalToMatcher] is ".concat(e," equal to ").concat(t,"? ").concat(n)),n}}(s):o===wu.GREATER_THAN_OR_EQUAL_TO?n=function(t){return function(e){var n=e>=t;return Vu.debug("[greaterThanEqualMatcher] is ".concat(e," greater than ").concat(t,"? ").concat(n)),n}}(s):o===wu.LESS_THAN_OR_EQUAL_TO?n=function(t){return function(e){var n=e<=t;return Gu.debug("[lessThanEqualMatcher] is ".concat(e," less than ").concat(t,"? ").concat(n)),n}}(s):o===wu.BETWEEN?(r=s,n=function(t){var e=t>=r.start&&t<=r.end;return Ku.debug("[betweenMatcher] is ".concat(t," between ").concat(r.start," and ").concat(r.end,"? ").concat(e)),e}):o===wu.EQUAL_TO_SET?n=function(t){return function(e){for(var n=e.length===t.length,r=function(r){ua(t,(function(t){return t===e[r]}))<0&&(n=!1)},i=0;i<e.length&&n;i++)r(i);return Bu.debug("[equalToSetMatcher] is ".concat(e," equal to set ").concat(t,"? ").concat(n)),n}}(s):o===wu.CONTAINS_ANY_OF_SET?n=function(t){return function(e){for(var n=!1,r=function(r){ua(e,(function(e){return e===t[r]}))>=0&&(n=!0)},i=0;i<t.length&&!n;i++)r(i);return zu.debug("[containsAnyMatcher] ".concat(e," contains at least an element of ").concat(t,"? ").concat(n)),n}}(s):o===wu.CONTAINS_ALL_OF_SET?n=function(t){return function(e){var n=!0;if(e.length<t.length)n=!1;else for(var r=function(r){ua(e,(function(e){return e===t[r]}))<0&&(n=!1)},i=0;i<t.length&&n;i++)r(i);return Wu.debug("[containsAllMatcher] ".concat(e," contains all elements of ").concat(t,"? ").concat(n)),n}}(s):o===wu.PART_OF_SET?n=function(t){return function(e){for(var n=e.length<=t.length,r=function(r){ua(t,(function(t){return t===e[r]}))<0&&(n=!1)},i=0;i<e.length&&n;i++)r(i);return qu.debug("[partOfMatcher] ".concat(e," is part of ").concat(t,"? ").concat(n)),n}}(s):o===wu.STARTS_WITH?n=function(t){return function(e){var n=t.some((function(t){return aa(e,t)}));return Yu.debug("[startsWithMatcher] ".concat(e," starts with ").concat(t,"? ").concat(n)),n}}(s):o===wu.ENDS_WITH?n=function(t){return function(e){var n=t.some((function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!ha(t)||!ha(e))&&(n&&(t=t.toLowerCase(),e=e.toLowerCase()),t.slice(t.length-e.length)===e)}(e,t)}));return Zu.debug("[endsWithMatcher] ".concat(e," ends with ").concat(t,"? ").concat(n)),n}}(s):o===wu.CONTAINS_STRING?n=function(t){return function(e){var n=t.some((function(t){return ha(e)&&e.indexOf(t)>-1}));return Qu.debug("[containsStringMatcher] ".concat(e," contains ").concat(t,"? ").concat(n)),n}}(s):o===wu.IN_SPLIT_TREATMENT?n=function(t,e){var n=t.split,r=t.treatments;return function(t,i){var o=t.key,s=t.attributes;$u.debug('[dependencyMatcher] will evaluate parent split: "'.concat(n,'" with key: ').concat(JSON.stringify(o)," ").concat(s?"\n attributes: ".concat(JSON.stringify(s)):""));var a=i(o,n,s,e);return oa(a)?a.then((function(t){return Ju(t,r,n)})):Ju(a,r,n)}}(s,e):o===wu.EQUAL_TO_BOOLEAN?n=function(t){return function(e){var n=t===e;return Xu.debug("[booleanMatcher] ".concat(t," === ").concat(e)),n}}(s):o===wu.MATCHES_STRING&&(n=function(t){return function(e){var n;try{n=new RegExp(t)}catch(i){return tl.debug("[stringMatcher] ".concat(t," is an invalid regex")),!1}var r=n.test(e);return tl.debug("[stringMatcher] does ".concat(e," matches with ").concat(t,"? ").concat(r?"yes":"no")),r}}(s)),n},nl=ja("splitio-engine:sanitize"),rl=wu,il=ku;function ol(t,e){return{key:t,attributes:e}}var sl=ja("splitio-engine:value"),al=function(t,e,n){var r=e.attribute,i=function(t,e,n){var r=void 0;return e?n?(r=n[e],sl.debug("Extracted attribute [".concat(e,"], [").concat(r,"] will be used for matching."))):sl.warn("Defined attribute [".concat(e,"], no attributes received.")):r=t,r}(t,r,n),o=function(t,e,n,r){var i,o,s,a,c=function(t,e){switch(t){case rl.EQUAL_TO:return"DATETIME"===e?Ou:void 0;case rl.GREATER_THAN_OR_EQUAL_TO:case rl.LESS_THAN_OR_EQUAL_TO:case rl.BETWEEN:return"DATETIME"===e?xu:void 0;case rl.IN_SPLIT_TREATMENT:return ol;default:return}}(t,n);switch(n){case il.NUMBER:case il.DATETIME:o=_a(e),i=isNaN(o)?void 0:o;break;case il.STRING:a=s=e,ga(s)&&(a=s.matchingKey?s.matchingKey:void 0),i=va(a)||void 0;break;case il.SET:i=function(t){var e=Array.isArray(t)?ya(t.map((function(t){return t+""}))):[];return e.length?e:void 0}(e);break;case il.BOOLEAN:i=function(t){if(!0===t||!1===t)return t;if("string"==typeof t){var e=t.toLocaleLowerCase();if("true"===e)return!0;if("false"===e)return!1}}(e);break;case il.NOT_SPECIFIED:i=e;break;default:i=void 0}return c&&(i=c(i,r)),nl.debug("Attempted to sanitize [".concat(e,"] which should be of type [").concat(n,"]. \n Sanitized and processed value => [").concat(i instanceof Object?JSON.stringify(i):i,"]")),i}(e.type,i,e.dataType,n);return void 0!==o?o:void sl.warn("Value ".concat(i," ").concat(r?"for attribute ".concat(r," "):0,"doesn't match with expected type."))};function cl(t){var e=function(t){return e=function(t){return(t=Number(t))<0?Math.ceil(t):Math.floor(t)}(t),n=Math.pow(2,32),e-Math.floor(e/n)*n;var e,n}(t);return e>=Math.pow(2,31)?e-Math.pow(2,32):e}var ul=function(t,e){return Math.abs(function(t,e){for(var n=0,r=0;r<t.length;r++)n=cl(cl(31*n)+t.charCodeAt(r));return cl(n^e)}(t,e)%100)+1},ll=n("y5ZV"),hl=n.n(ll),fl=hl.a.stringSource,dl=hl.a.stringDestination,pl=hl.a.encodeUTF16toUTF8;function gl(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function ml(t,e){return t<<e|t>>>32-e}function yl(t,e){return function(t,e){for(var n,r=(t=t||"").length%4,i=t.length-r,o=e=e||0,s=0,a=3432918353,c=461845907,u=0;u<i;u+=4)s=gl(s=255&t.charCodeAt(u)|(255&t.charCodeAt(u+1))<<8|(255&t.charCodeAt(u+2))<<16|(255&t.charCodeAt(u+3))<<24,a),s=gl(s=ml(s,15),c),o=gl(o=ml(o^=s,13),5)+3864292196;switch(s=0,r){case 3:s^=(255&t.charCodeAt(u+2))<<16;case 2:s^=(255&t.charCodeAt(u+1))<<8;case 1:s=gl(s^=255&t.charCodeAt(u),a),o^=s=gl(s=ml(s,15),c)}return n=o^=t.length,n=gl(n^=n>>>16,2246822507),n=gl(n^=n>>>13,3266489909),(o=n^=n>>>16)>>>0}((pl(fl(t),n=dl()),n()),e>>>0);var n}var vl={hash:yl,bucket:function(t,e){return Math.abs(yl(t,e)%100)+1}},_l=ja("splitio-engine");function bl(t){return 2===t?vl.bucket:ul}var Sl=function(t,e,n,r){var i=bl(r)(t,e),o=n.getTreatmentFor(i);return _l.debug("[engine] using algo ".concat(2!==r?"legacy":"murmur"," bucket ").concat(i," for key ").concat(t," using seed ").concat(e," - treatment ").concat(o)),o};function Tl(t,e,n,r,i,o){if(t)return{treatment:Sl(e,n,r,o),label:i}}var El=function(t,e,n,r){return function(i,o,s,a,c,u,l){if("ROLLOUT"===r&&!function(t,e,n,r){return!(t<100&&bl(r)(e,n)>t)}(s,i.bucketingKey,a,l))return{treatment:void 0,label:"not in split"};var h=t(i,u,c);return oa(h)?h.then((function(t){return Tl(t,i.bucketingKey,o,e,n,l)})):Tl(h,i.bucketingKey,o,e,n,l)}},wl=ja("splitio-engine:combiner");function kl(){return wl.error("Invalid Split provided, no valid conditions found"),{treatment:cc,label:"exception"}}function Cl(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];if(void 0!==r)return wl.debug("Treatment found: ".concat(r.treatment)),r}wl.debug("All predicates evaluated, no treatment found.")}var Al=ja("splitio-engine:combiner");function Il(t){for(var e,n=0,r=t.length;n<r&&t[n];n++);return Al.debug("[andCombiner] evaluates to ".concat(e=n===r)),e}var Nl=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=t.map((function(t){return t.apply(void 0,n)}));return-1!==ua(i,oa)?Promise.all(i).then(Il):Il(i)}};function Rl(t,e){return{treatment:ca(t,"treatment",e),label:ca(t,"label","default rule")}}function Ol(t,e){if(!(this instanceof Ol))return new Ol(t,e);this.baseInfo=t,this.evaluator=e,"string"!=typeof this.baseInfo.defaultTreatment&&(this.baseInfo.defaultTreatment=cc)}Ol.parse=function(t,e){var n=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i.matcherGroup.matchers,s=i.partitions,a=i.label,c=i.conditionType,u=(o=Du(o)).map((function(t){var n=el(t,e);return function(e,r,i){var o=al(e,t,r),s=void 0!==o&&n(o,i);return oa(s)?s.then((function(e){return Boolean(e^t.negate)})):Boolean(s^t.negate)}}));if(0===u.length){n=[];break}n.push(El(Nl(u),Mu.parse(s),a,c))}return function(t){return!Array.isArray(t)||Array.isArray(t)&&0===t.length?kl:function(e,n,r,i,o,s,a){var c=t.map((function(t){return t(e,n,r,i,a,o,s)}));return-1!==ua(c,oa)?Promise.all(c).then((function(t){return Cl(t)})):Cl(c)}}(n)}(t.conditions,e);return new Ol(ia()({},t),n)},Ol.prototype.getKey=function(){return this.baseInfo.name},Ol.prototype.getTreatment=function(t,e,n){var r,i,o,s=this.baseInfo,a=s.killed,c=s.seed,u=s.defaultTreatment,l=s.trafficAllocation,h=s.trafficAllocationSeed,f=s.algo;try{r=fu(t)}catch(p){return{treatment:cc,label:"exception"}}if(this.isGarbage())i=cc,o="archived";else{if(!a){var d=this.evaluator(r,c,l,h,e,f,n);return oa(d)?d.then((function(t){return Rl(t,u)})):Rl(d,u)}i=u,o="killed"}return{treatment:i,label:o}},Ol.prototype.isGarbage=function(){return"ARCHIVED"===this.baseInfo.status},Ol.prototype.getChangeNumber=function(){return this.baseInfo.changeNumber};var xl=Ol,Dl={treatment:cc,label:"exception",config:null};function Pl(t,e,n,r){var i;try{i=r.splits.getSplit(e)}catch(o){return Promise.resolve(Dl)}return oa(i)?i.then((function(e){return Fl(e,t,n,r)})):Fl(i,t,n,r)}function Ml(t,e,n,r){var i,o={};try{i=r.splits.fetchMany(e)}catch(s){return e.forEach((function(t){o[t]=Dl})),Promise.resolve(o)}return oa(i)?i.then((function(i){return Ll(e,i,t,n,r)})):Ll(e,i,t,n,r)}function Fl(t,e,n,r){var i={treatment:cc,label:"definition not found",config:null};if(t){var o=JSON.parse(t),s=xl.parse(o,r);if(i=s.getTreatment(e,n,Pl),oa(i))return i.then((function(t){return t.changeNumber=s.getChangeNumber(),t.config=ca(o,"configurations.".concat(t.treatment),null),t}));i.changeNumber=s.getChangeNumber(),i.config=ca(o,"configurations.".concat(i.treatment),null)}return i}function Ll(t,e,n,r,i){var o={},s=[];return t.forEach((function(t){var a=Fl(e[t],n,r,i);oa(a)?s.push(a.then((function(e){o[t]=e}))):o[t]=a})),s.length>0?Promise.all(s).then((function(){return o})):o}var jl=ja("splitio-client:impression-tracker"),Hl=ja("splitio-client:impressions-tracker"),Ul=ja("splitio-client:event-tracker"),Vl=ja("splitio-client"),Gl=function(t){var e,n=t.get(t.constants.SETTINGS),r=ca(n,"core.key",void 0),i=ca(n,"core.trafficType",void 0);n.core.key="localhost"===n.mode&&void 0===r?"localhost_key":Ja(r,"Client instantiation");var o=[n.core.key];if(void 0!==i){var s=dc(i,"Client instantiation");n.core.trafficType=s,o.push(s)}var a=function(t,e,n){var r="REDIS"!==t.get(t.constants.SETTINGS).storage.type,i=function(t){var e=t.get(t.constants.STORAGE),n=t.get(t.constants.COLLECTORS),r=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionListener,i=t.get(t.constants.INTEGRATIONS_MANAGER,!0),o=n.runtime,s=o.ip,a=o.hostname,c=n.version;return{track:function(t,n){var o=e.track([t]);if(oa(o)&&o.catch((function(t){jl.error("Could not store impression. Error: ".concat(t))})),r||i){var u={impression:ia()({},t),attributes:n,ip:s,hostname:a,sdkLanguageVersion:c};setTimeout((function(){i&&i.handleImpression(u);try{r&&r.logImpression(u)}catch(t){jl.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)}}}}(t),i=function(t){var e=t.get(t.constants.STORAGE).impressions,n=t.get(t.constants.SETTINGS),r=n.impressionListener,i=t.get(t.constants.INTEGRATIONS_MANAGER,!0),o=n.runtime,s=o.ip,a=o.hostname,c=n.version,u=[];return{queue:function(t,e){u.push({impression:t,attributes:e})},track:function(){var t=u.length,n=u.splice(0,t),o=e.track(n.map((function(t){return t.impression})));if(oa(o)&&o.then((function(){Hl.debug("Successfully stored ".concat(t," impression").concat(1===t?"":"s","."))})).catch((function(e){Hl.error("Could not store impressions bulk with ".concat(t," impression").concat(1===t?"":"s",". Error: ").concat(e))})),r||i)for(var l=function(t){var e={impression:ia()({},n[t].impression),attributes:n[t].attributes,ip:s,hostname:a,sdkLanguageVersion:c};setTimeout((function(){i&&i.handleImpression(e);try{r&&r.logImpression(e)}catch(t){Hl.error("Impression listener logImpression method threw: ".concat(t,"."))}}),0)},h=0;h<t;h++)l(h)}}}(t),o=function(t){var e=t.get(t.constants.STORAGE).events,n=t.get(t.constants.INTEGRATIONS_MANAGER,!0);function r(t,e){var r=t.trafficTypeName,i=t.key,o=t.value,s=t.timestamp,a=t.properties,c='event of type "'.concat(t.eventTypeId,'" for traffic type "').concat(r,'". Key: ').concat(i,". Value: ").concat(o,". Timestamp: ").concat(s,". ").concat(a?"With properties.":"With no properties.");return e?(Ul.info("Successfully qeued ".concat(c)),n&&setTimeout((function(){var e=ia()({},t);t.properties&&(e.properties=ia()({},t.properties)),n.handleEvent(e)}),0)):Ul.warn("Failed to queue ".concat(c)),e}return{track:function(t,n){var i=e.track(t,n);return oa(i)?i.then(r.bind(null,t)):r(t,i)}}}(t);function s(t,i,o){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Eu.TaskNames[s?"SDK_GET_TREATMENT_WITH_CONFIG":"SDK_GET_TREATMENT"],u=Eu.start(a,n),l=Pl(t,i,o,e);return oa(l)?l.then((function(e){return c(e,i,t,o,u,r.track,s,"getTreatment".concat(s?"withConfig":""))})):c(l,i,t,o,u,r.track,s,"getTreatment".concat(s?"withConfig":""))}function a(t,r,o){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Eu.TaskNames[s?"SDK_GET_TREATMENTS_WITH_CONFIG":"SDK_GET_TREATMENTS"],u=Eu.start(a,n),l={},h=function(e){return Object.keys(e).forEach((function(n){l[n]=c(e[n],n,t,o,!1,i.queue,s,"getTreatments".concat(s?"withConfig":""))})),i.track(),u(),l},f=Ml(t,r,o,e);return oa(f)?f.then((function(t){return h(t)})):h(f)}function c(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=t.get(t.constants.READY,!0)||t.get(t.constants.READY_FROM_CACHE,!0),l=qc(r),h=Yc(r);u||(e={treatment:cc,label:"not ready"});var f=e,d=f.treatment,p=f.label,g=f.changeNumber,m=f.config,y=void 0===m?null:m;return Vl.info("Split: ".concat(n,". Key: ").concat(l,". Evaluation: ").concat(d,". Label: ").concat(p)),nc(t,n,p,c)&&(Vl.info("Queueing corresponding impression."),s({feature:n,keyName:l,treatment:d,time:Date.now(),bucketingKey:h,label:p,changeNumber:g},i)),o&&o(),a?{treatment:d,config:y}:d}return{getTreatment:s,getTreatmentWithConfig:function(t,e,n){return s(t,e,n,!0)},getTreatments:a,getTreatmentsWithConfig:function(t,e,n){return a(t,e,n,!0)},track:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1024,c=qc(e),u=Date.now(),l={eventTypeId:r,trafficTypeName:n,value:i,timestamp:u,key:c,properties:s};return gc(n,t,"track"),o.track(l,a)}}}(t),o=i.getTreatment,s=i.getTreatmentWithConfig,a=i.getTreatments,c=i.getTreatmentsWithConfig,u=i.track;function l(e,n,r,i){var o,s,a=e,c=aa(i,"getTreatments")?ic(n,i):ec(n,i),u=(s=i,ga(o=r)||null==o?o:(Ga.error("".concat(s,": attributes must be a plain object.")),!1)),l=yc(t);return vc(t,i),{valid:l&&a&&c&&!1!==u,key:a,splitOrSplits:c,attributes:u}}return i.getTreatment=function(t,e,n){var i=l(t,e,n,"getTreatment");return i.valid?o(i.key,i.splitOrSplits,i.attributes):r?cc:Promise.resolve(cc)},i.getTreatmentWithConfig=function(t,e,n){var i=l(t,e,n,"getTreatmentWithConfig");return i.valid?s(i.key,i.splitOrSplits,i.attributes):r?ia()({},uc):Promise.resolve(ia()({},uc))},i.getTreatments=function(t,e,n){var i=l(t,e,n,"getTreatments");if(i.valid)return a(i.key,i.splitOrSplits,i.attributes);var o={};return i.splitOrSplits&&i.splitOrSplits.forEach((function(t){return o[t]=cc})),r?o:Promise.resolve(o)},i.getTreatmentsWithConfig=function(t,e,n){var i=l(t,e,n,"getTreatmentsWithConfig");if(i.valid)return c(i.key,i.splitOrSplits,i.attributes);var o={};return i.splitOrSplits&&i.splitOrSplits.forEach((function(t){return o[t]=ia()({},uc)})),r?o:Promise.resolve(o)},i.track=function(e,i,o,s,a){var c=e,l=n?i:dc(i,"track"),h=Wa(o,"track"),f=qa(s,"track"),d=Za(a,"track"),p=d.properties,g=d.size;return yc(t)&&c&&l&&h&&!1!==f&&!1!==p?u(c,l,h,f,p,g):!r&&Promise.resolve(!1)},i}(t,0,o.length>1);return a.isBrowserClient=!0,a.getTreatment=a.getTreatment.bind(a,n.core.key),a.getTreatmentWithConfig=a.getTreatmentWithConfig.bind(a,n.core.key),a.getTreatments=a.getTreatments.bind(a,n.core.key),a.getTreatmentsWithConfig=a.getTreatmentsWithConfig.bind(a,n.core.key),a.track=(e=a.track).bind.apply(e,[a].concat(o)),a},Kl=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,s=!1;function a(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];s||(o=setTimeout((function(){t.apply(void 0,i.concat([a]))}),n))}function c(){clearTimeout(o),o=void 0,s=!0}return c.reset=function(){clearTimeout(o),o=void 0,a.apply(void 0,[e].concat(r))},t.apply(void 0,r.concat([a])),c},Bl=function(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},c=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return s},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var u in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),s.push([e,n]),a[e]=a[e]?a[e]+","+n:n})),n(c())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)}))};function Wl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function zl(t,e,n){return(zl=Wl()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Gc(i,n.prototype),i}).apply(null,arguments)}function ql(t){var e="function"==typeof Map?new Map:void 0;return(ql=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return zl(t,arguments,Wc(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Gc(n,t)})(t)}function Yl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wc(t);if(e){var i=Wc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bc(this,n)}}var Zl=function(t){Kc(n,t);var e=Yl(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Split Error";return Ta(this,n),(t=e.call(this,r)).message=r,t}return n}(ql(Error)),Ql=function(t){Kc(n,t);var e=Yl(n);function n(t){return Ta(this,n),e.call(this,t||"Split Timeout Error")}return n}(Zl),$l=function(t){Kc(n,t);var e=Yl(n);function n(t,r){var i;return Ta(this,n),(i=e.call(this,t||"Split Network Error")).statusCode=r,i}return n}(Zl),Jl=ja("splitio-services:service");function Xl(t){var e=t.url;return(window&&window.fetch||Bl)(e,t).then((function(t){if(!t.ok)throw{response:t};return t})).catch((function(n){var r=n.response,i="";if(r)switch(r.status){case 404:i="Invalid API key or resource not found.";break;default:i=r.statusText}else i=n.message;throw r&&403===r.status||Jl[t.logErrorsAsInfo?"info":"error"]("Response status is not OK. Status: ".concat(r?r.status:"NO_STATUS",". URL: ").concat(e,". Message: ").concat(i)),new $l(i,r&&r.status)}))}var th=Xl,eh=function(t,e,n){var r=t.version,i=t.runtime,o=i.ip,s=i.hostname,a={Accept:"application/json","Content-Type":"application/json"};return a.Authorization="Bearer ".concat(t.core.authorizationKey),a.SplitSDKVersion=r,o&&(a.SplitSDKMachineIP=o),s&&(a.SplitSDKMachineName=s),ia()({headers:a,url:t.url(e)},{},n)};function nh(t){var e=[];return ba(t.toJSON(),(function(t,n){e.push({name:n,delta:t})})),e}var rh=Xl;function ih(t,e){return eh(t,"/testImpressions/bulk",ia()({method:"POST"},e))}function oh(t,e){var n=e.core.labelsEnabled,r=function(t,e){var n={};if(Array.isArray(t)&&ha("feature"))for(var r=0;r<t.length;r++){var i=t[r].feature;ha(i)&&(n[i]||(n[i]=[]),n[i].push(t[r]))}return n}(t.state()),i=[];return ba(r,(function(t,e){i.push({testName:e,keyImpressions:t.map((function(t){var e={keyName:t.keyName,treatment:t.treatment,time:t.time,changeNumber:t.changeNumber};return n&&(e.label=t.label),t.bucketingKey&&(e.bucketingKey=t.bucketingKey),e}))})})),i}function sh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wc(t);if(e){var i=Wc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bc(this,n)}}var ah=function(){function t(e){Ta(this,t),this.storage=e,this.latency=this.latency.bind(this),this.count=this.count.bind(this),this.countException=this.countException.bind(this)}return wa(t,[{key:"latency",value:function(t){this.storage.metrics.track("".concat(this.metricType,".time"),t)}},{key:"count",value:function(t){this.storage.count.track("".concat(this.metricType,".status.").concat(t))}},{key:"countException",value:function(){this.storage.count.track("".concat(this.metricType,".exception"))}}]),t}(),ch=function(t){Kc(n,t);var e=sh(n);function n(t){var r;return Ta(this,n),(r=e.call(this,t)).metricType="segmentChangeFetcher",r}return n}(ah),uh=function(t){Kc(n,t);var e=sh(n);function n(t){var r;return Ta(this,n),(r=e.call(this,t)).metricType="splitChangeFetcher",r}return n}(ah),lh=function(t){Kc(n,t);var e=sh(n);function n(t){var r;return Ta(this,n),(r=e.call(this,t)).metricType="mySegmentsFetcher",r}return n}(ah),hh=function(){function t(e){Ta(this,t),this.storage=e,this.ready=this.ready.bind(this),this.getTreatment=this.getTreatment.bind(this),this.getTreatments=this.getTreatments.bind(this),this.getTreatmentWithConfig=this.getTreatmentWithConfig.bind(this),this.getTreatmentsWithConfig=this.getTreatmentsWithConfig.bind(this)}return wa(t,[{key:"ready",value:function(t){this.storage.metrics.track("sdk.ready",t)}},{key:"getTreatment",value:function(t){this.storage.metrics.track("sdk.getTreatment",t)}},{key:"getTreatments",value:function(t){this.storage.metrics.track("sdk.getTreatments",t)}},{key:"getTreatmentWithConfig",value:function(t){this.storage.metrics.track("sdk.getTreatmentWithConfig",t)}},{key:"getTreatmentsWithConfig",value:function(t){this.storage.metrics.track("sdk.getTreatmentsWithConfig",t)}}]),t}(),fh=ja("splitio-metrics"),dh=Xl;function ph(t,e){return eh(t,"/events/bulk",ia()({method:"POST"},e))}var gh=ja("splitio-events"),mh=Xl;function yh(t){return"users="+encodeURIComponent(t)}function vh(){return window&&"function"==typeof window.EventSource?window.EventSource:void 0}var _h=function(){function t(e,n,r){Ta(this,t),this.baseMillis=n||t.DEFAULT_BASE_MILLIS,this.maxMillis=r||t.DEFAULT_MAX_MILLIS,this.attempts=0,this.cb=e}return wa(t,[{key:"scheduleCall",value:function(){var t=this,e=Math.min(this.baseMillis*Math.pow(2,this.attempts),this.maxMillis);return this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.cb()}),e),this.attempts++,e}},{key:"reset",value:function(){this.attempts=0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=0)}}]),t}();_h.DEFAULT_BASE_MILLIS=1e3,_h.DEFAULT_MAX_MILLIS=18e5;var bh=_h,Sh=function(){function t(e,n){Ta(this,t),this.mySegmentsStorage=e,this.mySegmentsProducer=n,this.maxChangeNumber=0,this.segmentList=void 0,this.currentChangeNumber=-1,this.put=this.put.bind(this),this.__handleMySegmentUpdateCall=this.__handleMySegmentUpdateCall.bind(this),this.backoff=new bh(this.__handleMySegmentUpdateCall)}return wa(t,[{key:"__handleMySegmentUpdateCall",value:function(){var t=this;if(this.maxChangeNumber>this.currentChangeNumber){this.handleNewEvent=!1;var e=this.maxChangeNumber;this.mySegmentsProducer.synchronizeMySegments(this.segmentList).then((function(n){!1!==n&&(t.currentChangeNumber=Math.max(t.currentChangeNumber,e)),t.handleNewEvent?t.__handleMySegmentUpdateCall():t.backoff.scheduleCall()}))}}},{key:"put",value:function(t,e){t<=this.currentChangeNumber||t<=this.maxChangeNumber||(this.maxChangeNumber=t,this.handleNewEvent=!0,this.backoff.reset(),this.segmentList=e,this.mySegmentsProducer.isSynchronizingMySegments()||this.__handleMySegmentUpdateCall())}}]),t}(),Th=function(){function t(e,n,r){Ta(this,t),this.splitStorage=e,this.splitProducer=n,this.maxChangeNumber=0,this.splitsEventEmitter=r,this.put=this.put.bind(this),this.killSplit=this.killSplit.bind(this),this.__handleSplitUpdateCall=this.__handleSplitUpdateCall.bind(this),this.backoff=new bh(this.__handleSplitUpdateCall)}return wa(t,[{key:"__handleSplitUpdateCall",value:function(){var t=this;this.maxChangeNumber>this.splitStorage.getChangeNumber()&&(this.handleNewEvent=!1,this.splitProducer.synchronizeSplits().then((function(){t.handleNewEvent?t.__handleSplitUpdateCall():t.backoff.scheduleCall()})))}},{key:"put",value:function(t){t<=this.splitStorage.getChangeNumber()||t<=this.maxChangeNumber||(this.maxChangeNumber=t,this.handleNewEvent=!0,this.backoff.reset(),this.splitProducer.isSynchronizingSplits()||this.__handleSplitUpdateCall())}},{key:"killSplit",value:function(t,e,n){var r=this;this.splitStorage.killLocally(e,n,t).then((function(e){e&&r.splitsEventEmitter.emit(r.splitsEventEmitter.SDK_SPLITS_ARRIVED,!0),r.put(t)}))}}]),t}(),Eh=/^control_/,wh=function(){function t(e,n){Ta(this,t),this.EventSource=e,this.streamingUrl=n.url("/sse"),this.reopen=this.reopen.bind(this)}return wa(t,null,[{key:"getInstance",value:function(e){var n=vh();if(n)return new t(n,e)}}]),wa(t,[{key:"setEventHandler",value:function(t){this.handler=t}},{key:"open",value:function(t){this.close(),this.authToken=t;var e=Object.keys(t.channels).map((function(t){var e=Eh.test(t)?"[?occupancy=metrics.publishers]":"";return encodeURIComponent(e+t)})).join(","),n="".concat(this.streamingUrl,"?channels=").concat(e,"&accessToken=").concat(t.token,"&v=").concat("1.1","&heartbeats=true");this.connection=new this.EventSource(n),this.handler&&(this.connection.onopen=this.handler.handleOpen,this.connection.onmessage=this.handler.handleMessage,this.connection.onerror=this.handler.handleError)}},{key:"close",value:function(){this.connection&&this.connection.close()}},{key:"reopen",value:function(){this.open(this.authToken)}}]),t}(),kh=/control_pri$/,Ch=ja("splitio-sync:sse-handler");function Ah(t){return e=vl.hash(t,0).toString(),btoa(e);var e}var Ih=ja("splitio-sync:push-manager");function Nh(t,e){if(n=Ih,vh()?"function"==typeof atob&&"function"==typeof btoa||(n.warn('"atob" and "btoa" functions for Base64 encoding are not available. Falling back to polling mode.'),0):(n.warn("EventSource API is not available. Falling back to polling mode."),0)){var n,r=new $c.a,i=t.get(t.constants.READINESS).splits,o=t.get(t.constants.SETTINGS),s=t.get(t.constants.STORAGE),a=wh.getInstance(o),c=function(t){var e,n,r,i,o,s=(e=t,n=-1,r=!0,i=-1,o=!0,{handleOpen:function(){e.emit("PUSH_CONNECT")},isStreamingUp:function(){return o&&r},handleOccupancyEvent:function(t,i,s){kh.test(i)&&s>n&&(n=s,o&&(0===t&&r?e.emit("PUSH_DISCONNECT"):0===t||r||e.emit("PUSH_CONNECT")),r=0!==t)},handleControlEvent:function(t,n,s){kh.test(n)&&s>i&&(i=s,"STREAMING_DISABLED"===t?e.emit("PUSH_DISABLED"):r&&("STREAMING_PAUSED"===t&&o?e.emit("PUSH_DISCONNECT"):"STREAMING_RESUMED"!==t||o||e.emit("PUSH_CONNECT")),o="STREAMING_RESUMED"===t)}});return{handleOpen:function(){s.handleOpen()},handleError:function(e){var n=e;try{n=function(t){return ha(t.data)&&(t.parsedData=JSON.parse(t.data)),t}(e)}catch(r){Ch.warn("Error parsing SSE error notification: ".concat(r))}t.emit("SSE_ERROR",n)},handleMessage:function(e){var n;try{n=function(t){var e=JSON.parse(t.data);return e.parsedData=JSON.parse(e.data),e.name&&"[meta]occupancy"===e.name&&(e.parsedData.type="OCCUPANCY"),e}(e)}catch(a){return void Ch.warn("Error parsing new SSE message notification: ".concat(a))}var r=n.parsedData,i=n.channel,o=n.timestamp;if(Ch.debug("New SSE message received, with data: ".concat(n.data,".")),s.isStreamingUp()||"OCCUPANCY"===r.type||"CONTROL"===r.type)switch(r.type){case"SPLIT_UPDATE":t.emit("SPLIT_UPDATE",r.changeNumber);break;case"SEGMENT_UPDATE":t.emit("SEGMENT_UPDATE",r.changeNumber,r.segmentName);break;case"MY_SEGMENTS_UPDATE":t.emit("MY_SEGMENTS_UPDATE",r,i);break;case"SPLIT_KILL":t.emit("SPLIT_KILL",r.changeNumber,r.splitName,r.defaultTreatment);break;case"OCCUPANCY":s.handleOccupancyEvent(r.metrics.publishers,i,o);break;case"CONTROL":s.handleControlEvent(r.controlType,i,o)}}}}(r);a.setEventHandler(c);var u,l={},h=[],f=!1,d=new bh(_,o.scheduler.authRetryBackoffBase),p=new bh(a.reopen,o.scheduler.streamingReconnectBackoffBase),g=0;r.on("PUSH_DISCONNECT",S),r.on("PUSH_DISABLED",(function(){b(),r.emit("PUSH_DISCONNECT")})),r.on("SSE_ERROR",(function(t){var e;a.close(),e=!t.parsedData||400!==t.parsedData.statusCode&&401!==t.parsedData.statusCode?p.scheduleCall():d.scheduleCall();var n=t.parsedData&&t.parsedData.message;Ih.error("Fail to connect to streaming".concat(n?', with error message: "'.concat(n,'"'):"",". Attempting to reconnect in ").concat(e/1e3," seconds.")),r.emit("PUSH_DISCONNECT")}));var m=t.get(t.constants.PRODUCER),y=new Th(s.splits,m,i);if(h.push(y),r.on("SPLIT_KILL",y.killSplit),r.on("SPLIT_UPDATE",y.put),e)r.on("MY_SEGMENTS_UPDATE",(function(n,r){var i=r.split("_")[2],o=l[i];if(o&&e[o]){var s=e[o].get(t.constants.MY_SEGMENTS_CHANGE_WORKER,!0);s&&s.put(n.changeNumber,n.includesPayload?n.segmentList?n.segmentList:[]:void 0)}}));else{var v=new Sh(s.segments,m);h.push(v),r.on("SEGMENT_UPDATE",v.put)}return ia()(Object.create(r),{stop:function(){b(),S()},start:_,startNewClient:function(t,e){var n=Ah(t),r=e.get(e.constants.STORAGE),i=e.get(e.constants.PRODUCER);l[n]||(l[n]=t,f=!0);var o=new Sh(r.segments,i);h.push(o),e.put(e.constants.MY_SEGMENTS_CHANGE_WORKER,o),setTimeout((function(){f&&(f=!1,_())}),0)},removeClient:function(t){var e=Ah(t);delete l[e]}})}function _(){u=!1,Ih.info("Connecting to push streaming.");var t=e?Object.keys(e):void 0;(function(t,e){return mh(function(t,e){var n="/auth";if(e){var r=e.map(yh).join("&");r&&(n+="?"+r)}return eh(t,n)}(t,e)).then((function(t){return t.json()})).then((function(t){if(t.token){var e=(i=t.token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent((r=i,atob(r)).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")),JSON.parse(o));if("number"!=typeof e.iat||"number"!=typeof e.exp)throw'token properties "issuedAt" (iat) or "expiration" (exp) are missing or invalid';var n=JSON.parse(e["x-ably-capability"]);return ia()({decodedToken:e,channels:n},t)}var r,i,o;return t}))})(o,t).then((function(n){if(!u){if(d.reset(),p.reset(),!n.pushEnabled)return Ih.info("Streaming is not available. Switching to polling mode."),void r.emit("PUSH_DISCONNECT");if(!(t&&t.length<Object.keys(e).length)){var i=n.decodedToken;a.open(n),function(t,e){g&&clearTimeout(g);var n=e-t-600;Ih.info("Refreshing streaming token in ".concat(n," seconds.")),g=setTimeout(_,1e3*n)}(i.iat,i.exp)}}})).catch((function(t){if(!u){a.close(),r.emit("PUSH_DISCONNECT");var e='Failed to authenticate for streaming. Error: "'.concat(t.message,'".');if(t.statusCode>=400&&t.statusCode<500)Ih.error(e);else{var n=d.scheduleCall();Ih.error("".concat(e,". Attempting to reauthenticate in ").concat(n/1e3," seconds."))}}}))}function b(){u=!0,Ih.info("Disconnecting from push streaming."),a.close(),g&&clearTimeout(g),d.reset(),p.reset()}function S(){h.forEach((function(t){return t.backoff.reset()}))}}var Rh=ja("splitio-producer:task"),Oh=function(t,e){var n,r=(n=t).name?n.name:(n.toString().match(/function (.+?)\(/)||["",""])[1],i=!1;return{start:function(){i||(Rh.debug("Starting ".concat(r," refreshing each ").concat(e)),i=Kl((function(e){Rh.debug("Running ".concat(r)),t().then((function(){return e()}))}),e))},stop:function(){Rh.debug("Stopping ".concat(r)),i&&i(),i=!1},isRunning:function(){return!!i}}},xh=function(t,e){return t<1?e:new Promise((function(n,r){var i=setTimeout((function(){r(new Ql("Operation timed out because it exceeded the configured time limit of ".concat(t,"ms.")))}),t);e.then((function(t){clearTimeout(i),n(t)}),(function(t){clearTimeout(i),r(t)}))}))},Dh=Xl;function Ph(t,e,n){return eh(t,"/splitChanges?since=".concat(e).concat(n||""))}var Mh=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=t.sync.__splitFiltersValidation.queryString,s=Dh(Ph(t,e,o)),a=n||i;return s=Eu.start(Eu.TaskNames.SPLITS_FETCH,!!a&&r,s),n&&(s=xh(t.startup.requestTimeoutBeforeReady,s)),s.then((function(t){return t.json().catch((function(t){throw new Zl(t.message)}))}))},Fh=ja("splitio-producer:split-changes");function Lh(t){var e=t.reduce((function(t,e){return"ACTIVE"===e.status?(t.added.push([e.name,JSON.stringify(e)]),(n=e.conditions,r=new Iu,n.forEach((function(t){t.matcherGroup.matchers.forEach((function(t){"IN_SEGMENT"===t.matcherType&&r.add(t.userDefinedSegmentMatcherData.segmentName)}))})),r).forEach((function(e){t.segments.add(e)}))):t.removed.push(e.name),t;var n,r}),{added:[],removed:[],segments:new Iu});return e.segments=Au(e.segments),e}var jh=Xl;function Hh(t){return eh(t,"/mySegments/".concat(qc(t.core.key)))}var Uh=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=jh(Hh(t));return r=Eu.start(Eu.TaskNames.MY_SEGMENTS_FETCH,!!e&&n,r),e&&(r=xh(t.startup.requestTimeoutBeforeReady,r)),r.then((function(t){return t.json().catch((function(t){throw new Zl(t.message)}))})).then((function(t){return t.mySegments.map((function(t){return t.name}))}))},Vh=ja("splitio-producer:my-segments"),Gh=ja("splitio-producer:mySegmentsHandler"),Kh=function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE).splits,r=t.get(t.constants.READINESS),i=r.splits,o=r.segments,s=function(t){var e=t.getAll(),n=e[t.constants.SETTINGS],r=e[t.constants.STORAGE],i=e[t.constants.COLLECTORS],o=e[t.constants.READINESS].segments,s=!0,a=!0;function c(t){var e=r.segments.resetSegments(t);r.splits.usesSegments()&&(e||s)&&(s=!1,o.emit(o.SDK_SEGMENTS_ARRIVED))}return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return(r?new Promise((function(t){c(r),t()})):Uh(n,a,i).then((function(t){a=!1,c(t)}))).catch((function(r){return r instanceof Zl||setTimeout((function(){throw r}),0),a&&n.startup.retriesOnFailureBeforeReady>e?(Vh.warn("Retrying download of segments #".concat(e+=1,". Reason: ").concat(r)),t(e)):(a=!1,!1)}))}}(t),a=Oh(u,e.scheduler.segmentsRefreshRate);i.on(i.SDK_SPLITS_ARRIVED,(function(){if(l){var t=n.usesSegments();t!==a.isRunning()&&(Gh.info("Turning segments data polling ".concat(t?"ON":"OFF",".")),t?a.start():a.stop())}})),n.usesSegments()?i.once(i.SDK_SPLITS_ARRIVED,h):setTimeout(h,0);var c=!1;function u(t){return c=!0,s(0,t).then((function(t){return c=!1,t}))}var l=!1;function h(){t.get(t.constants.READY,!0)||n.usesSegments()||o.emit(o.SDK_SEGMENTS_ARRIVED)}return{start:function(){l=!0,n.usesSegments()&&a.start()},stop:function(){l=!1,a.stop()},isRunning:function(){return l},isSynchronizingMySegments:function(){return c},synchronizeMySegments:u}},Bh=ja("splitio-producer:updater"),Wh=ja("splitio-sync:sync-manager"),zh=ja("splitio-client:cleanup"),qh=function(){function t(e){Ta(this,t),this.storage=e.get(e.constants.STORAGE),this.settings=e.get(e.constants.SETTINGS),this.flushData=this.flushData.bind(this)}return wa(t,[{key:"start",value:function(){window&&window.addEventListener&&(zh.debug("Registering flush handler when unload page event is triggered."),window.addEventListener("unload",this.flushData))}},{key:"stop",value:function(){window&&window.removeEventListener&&(zh.debug("Deregistering flush handler when unload page event is triggered."),window.removeEventListener("unload",this.flushData))}},{key:"flushData",value:function(){this._flushImpressions(),this._flushEvents()}},{key:"_flushImpressions",value:function(){var t=this.storage.impressions;if(!t.isEmpty()){var e=this.settings.url("/testImpressions/beacon"),n=oh(t,this.settings);this._sendBeacon(e,n)||rh(ih(this.settings,{body:JSON.stringify(n)})),t.clear()}}},{key:"_flushEvents",value:function(){var t=this.storage.events;if(!t.isEmpty()){var e=this.settings.url("/events/beacon"),n=t.toJSON();this._sendBeacon(e,n)||dh(ph(this.settings,{body:JSON.stringify(n)})),t.clear()}}},{key:"_sendBeacon",value:function(t,e){if(navigator&&navigator.sendBeacon){var n=JSON.stringify({entries:e,token:this.settings.core.authorizationKey,sdk:this.settings.version});return navigator.sendBeacon(t,n)}return!1}}]),t}(),Yh={},Zh=function(t,e,n){var r,i=!!n,o=t.get(t.constants.SETTINGS),s=t.get(t.constants.READINESS),a=t.get(t.constants.STORAGE),c=t.get(t.constants.STATUS_MANAGER),u=s.gate,l=s.splits,h=s.segments,f=u.SDK_READY,d=i?void 0:function(t){var e=0,n=t.get(t.constants.SETTINGS),r=t.get(t.constants.STORAGE),i=function(){if(r.impressions.isEmpty())return Promise.resolve();var t=r.impressions.queue.length;fh.info("Pushing ".concat(t," impressions"));var i=Eu.start(Eu.TaskNames.IMPRESSIONS_PUSH);return rh(ih(n,{body:JSON.stringify(oh(r.impressions,n))})).then((function(){e=0,r.impressions.clear()})).catch((function(n){e?(fh.warn("Droping ".concat(t," impressions after retry. Reason ").concat(n,".")),e=0,r.impressions.clear()):(e++,fh.warn("Failed to push ".concat(t," impressions, keeping data to retry on next iteration. Reason ").concat(n,".")))})).then((function(){return i()}))},o=!1,s=!1;return{start:function(){o=Kl((function(t){return i().then((function(){return t()}))}),n.scheduler.impressionsRefreshRate),s=Kl((function(t){return function(){if(r.metrics.isEmpty()&&r.count.isEmpty())return Promise.resolve();fh.info("Pushing metrics");var t,e,i=Eu.start(Eu.TaskNames.METRICS_PUSH),o=r.metrics.isEmpty()?null:th(function(t,e){return eh(t,"/metrics/times",ia()({method:"POST"},e,{logErrorsAsInfo:!0}))}(n,{body:JSON.stringify((t=r.metrics,e=[],ba(t.toJSON(),(function(t,n){e.push({name:n,latencies:t})})),e))})).then((function(){return r.metrics.clear()})).catch((function(){return r.metrics.clear()})),s=r.count.isEmpty()?null:th(function(t,e){return eh(t,"/metrics/counters",ia()({method:"POST"},e,{logErrorsAsInfo:!0}))}(n,{body:JSON.stringify(nh(r.count))})).then((function(){return r.count.clear()})).catch((function(){return r.count.clear()}));return Promise.all([o,s]).then((function(t){return i(),t}))}().then((function(){return t()}))}),n.scheduler.metricsRefreshRate)},flush:function(){return i()},stop:function(){o&&o(),s&&s()},collectors:{segmentChanges:new ch(r),splitChanges:new uh(r),mySegments:new lh(r),client:new hh(r)}}}(t),p=i?void 0:function(t){var e=t.get(t.constants.SETTINGS),n=t.get(t.constants.STORAGE),r=function(){if(n.events.isEmpty())return Promise.resolve();gh.info("Pushing ".concat(n.events.state().length," queued events."));var t=Eu.start(Eu.TaskNames.EVENTS_PUSH),r=JSON.stringify(n.events.toJSON()),i=function(){return t()};return n.events.clear(),dh(ph(e,{body:r})).then(i).catch(i)},i=!1,o=!1,s=function(){return o=Kl((function(t){return r().then((function(){return t()}))}),e.scheduler.eventsPushRate)};return{start:function(){e.startup.eventsFirstPushWindow>0?i=setTimeout(s,e.startup.eventsFirstPushWindow):s()},flush:function(){return r()},stop:function(){i&&clearTimeout(i),o&&o()},flushAndResetTimer:function(){return gh.info("Flushing events and reseting timer."),o&&o.reset(),r()}}}(t),g=i?void 0:new qh(t);switch(o.mode){case sc:case oc:t.put(t.constants.COLLECTORS,d&&d.collectors),i?r=Yh[o.core.authorizationKey].shared(t):(r=function(t){var e={},n=t.get(t.constants.SETTINGS),r=u(!1,t),i=n.streamingEnabled?Nh(t,e):void 0,o=t.get(t.constants.PRODUCER);function s(){o.isRunning()?Wh.info("Streaming couldn't connect. Continue periodic fetch of data."):(Wh.info("Streaming not available. Starting periodic fetch of data."),ba(e,(function(t){t.get(t.constants.PRODUCER).start()})))}function a(){o.isRunning()&&(Wh.info("PUSH (re)connected. Syncing and stopping periodic fetch of data."),ba(e,(function(t){t.get(t.constants.PRODUCER).stop()}))),c()}function c(){t.get(t.constants.PRODUCER).synchronizeSplits(),ba(e,(function(t){t.get(t.constants.PRODUCER).synchronizeMySegments()}))}function u(t,n){var r=t?Kh(n):function(t){var e=t.get(t.constants.SETTINGS),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAll(),r=n[t.constants.SETTINGS],i=n[t.constants.READINESS],o=n[t.constants.STORAGE],s=n[t.constants.COLLECTORS],a=i.splits,c=!0,u=!0;return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;function i(i){Fh.debug("Spin up split update using since = ".concat(i));var l=Mh(r,i,c,s,e).then((function(t){c=!1;var e=Lh(t.splits);return Fh.debug("New splits ".concat(e.added.length)),Fh.debug("Removed splits ".concat(e.removed.length)),Fh.debug("Segment names collected ".concat(e.segments)),Promise.all([o.splits.setChangeNumber(t.till),o.splits.addSplits(e.added),o.splits.removeSplits(e.removed),o.segments.registerSegments(e.segments)]).then((function(){(i!==t.till||u)&&(u=!1,a.emit(a.SDK_SPLITS_ARRIVED))}))})).catch((function(e){return e instanceof Zl||(setTimeout((function(){throw e}),0),c=!1),Fh.warn("Error while doing fetch of Splits. ".concat(e)),c&&r.startup.retriesOnFailureBeforeReady>n?(Fh.info("Retrying download of splits #".concat(n+=1,". Reason: ").concat(e)),t(n)):(c=!1,!1)}));return c&&o.splits.checkCache()&&a.emit(a.SDK_SPLITS_CACHE_LOADED),l}var l=o.splits.getChangeNumber(),h=oa(l)?l.then(i):Promise.resolve(l);return h.then(i)}}(t),r=Oh(s,e.scheduler.featuresRefreshRate),i=Kh(t),o=!1;function s(){return o=!0,n().then((function(t){return o=!1,t}))}return{start:function(){Bh.info("Starting BROWSER producer"),r.start(),i.start()},stop:function(){Bh.info("Stopping BROWSER producer"),r.stop(),i.stop()},isRunning:r.isRunning,isSynchronizingSplits:function(){return o},synchronizeSplits:s,isSynchronizingMySegments:i.isSynchronizingMySegments,synchronizeMySegments:i.synchronizeMySegments}}(n),u=n.get(n.constants.SETTINGS),l=va(qc(u.core.key));return n.put(n.constants.PRODUCER,r),e[l]&&Wh.warn("A client with the same user key has already been created. Only the new instance will be properly synchronized."),e[l]=n,{start:function(){i?(t?o.isRunning()?r.start():r.synchronizeMySegments():(c(),i.on("PUSH_CONNECT",a),i.on("PUSH_DISCONNECT",s)),i.startNewClient(l,n)):r.start()},stop:function(){e[l]&&(delete e[l],i&&(i.removeClient(l),t||i.stop()),r.isRunning()&&r.stop())}}}return r.shared=u.bind(null,!0),r}(t),Yh[o.core.authorizationKey]=r);break;case ac:t.put(t.constants.READY_FROM_CACHE,!0)}if(e&&r&&!i){var m=e.sdkReadyTracker,y=e.splitsReadyTracker,v=e.segmentsReadyTracker;m.setCollectorForTask(d.collectors),u.once(f,m),l.once(l.SDK_SPLITS_ARRIVED,y),h.once(h.SDK_SEGMENTS_ARRIVED,v)}r&&r.start(),d&&d.start(),p&&t.put(t.constants.EVENTS,p)&&p.start(),t.put(t.constants.COLLECTORS,n);var _=ia()(Object.create(c),Gl(t),{destroy:function(){return r&&r.stop(),d&&d.stop(),p&&p.stop(),Promise.all([d&&d.flush(),p&&p.flush()]).then((function(){s.destroy(),g&&g.stop(),a.destroy&&a.destroy(),t.put(t.constants.DESTROYED,!0),i||(Va(o.core.authorizationKey),delete Yh[o.core.authorizationKey])}))}});return!i&&g.start(_.destroy),{api:_,metricCollectors:d&&d.collectors}};function Qh(t){var e=t.treatment;return t.keys?{conditionType:"WHITELIST",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"WHITELIST",negate:!1,whitelistMatcherData:{whitelist:ha(t.keys)?[t.keys]:t.keys}}]},partitions:[{treatment:e,size:100}],label:"whitelisted ".concat(e)}:{conditionType:"ROLLOUT",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"ALL_KEYS",negate:!1}]},partitions:[{treatment:e,size:100}],label:"default rule"}}var $h={emptyMock:1},Jh=ja("splitio-producer:offline"),Xh=(function(t,e){var n=e.getAll(),r=n[e.constants.SETTINGS],i=n[e.constants.READINESS],o=n[e.constants.STORAGE];return function(){var e=[],n=null,s={};try{s=t(r)}catch(a){n=a,Jh.error("There was an issue loading the mock Splits data, no changes will be applied to the current cache. ".concat(a))}return!n&&s?(Jh.debug("Splits data: "),Jh.debug(JSON.stringify(s)),ba(s,(function(t,n){e.push([n,JSON.stringify({name:n,status:"ACTIVE",killed:!1,trafficAllocation:100,defaultTreatment:"control",conditions:t.conditions||[],configurations:t.configurations,trafficTypeName:t.trafficTypeName})])})),Promise.all([o.splits.flush(),o.splits.addSplits(e)]).then((function(){i.splits.emit(i.splits.SDK_SPLITS_ARRIVED),i.segments.emit(i.segments.SDK_SEGMENTS_ARRIVED)}))):Promise.resolve()}}).bind(null,(function(t){var e,n,r=t.features||{};if(e=r,!((n=Object.keys(e)).length!==Object.keys($h).length?($h=e,1):n.some((function(t){var n,r,i=!$h[t],o=(r=e[t],sa(n=$h[t])!==sa(r)||("string"==typeof n?n!==r:n.treatment!==r.treatment||n.config!==r.config)),s=i||o;return s&&($h=e),s}))))return!1;var i={};return ba(r,(function(t,e){var n=t,r=null;ga(t)&&(n=t.treatment,r=t.config||r);var o={};null!==r&&(o[n]=r),i[e]={conditions:[Qh({treatment:n})],configurations:o}})),i})),tf=function(t,e){var n=!e,r=t.get(t.constants.READINESS),i=t.get(t.constants.STORAGE),o=t.get(t.constants.STATUS_MANAGER);n&&setTimeout((function(){r.gate.emit(r.gate.SDK_READY)}),0);var s=n?void 0:function(t){var e=t.get(t.constants.SETTINGS),n=Xh(t);return Oh(n,e.scheduler.offlineRefreshRate)}(t);return s&&s.start(),{api:ia()(Object.create(o),Gl(t),{destroy:function(){return s&&s.stop(),r.destroy(),i.destroy&&i.destroy(),t.put(t.constants.DESTROYED,!0),!n&&Va(),Promise.resolve()}}),metricCollectors:!1}};function ef(t,e){var n=!1,r=!1,i=function t(i){var o=new Promise((function(t,n){return i.then(t,(function(t){r?n(t):e(t)}))})),s=o.then;return o.then=function(e,i){var a=s.call(o,e,i);return"function"==typeof e&&(n=!0),"function"==typeof i?(r=!0,a):t(a)},o}(t);return i.hasOnFulfilled=function(){return n},i}var nf=ja("");function rf(t){nf.error(t)}function of(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.get(t.constants.READINESS).gate,r=0,i=!1,o=!1,s=n.SDK_READY,a=n.SDK_READY_FROM_CACHE,c=n.SDK_UPDATE,u=n.SDK_READY_TIMED_OUT;n.on("removeListener",(function(t){t===s&&r--})),n.on("newListener",(function(t){t!==s&&t!==u||(i?nf.error("A listener was added for ".concat(t===s?"SDK_READY":"SDK_READY_TIMED_OUT"," on the SDK, which has already fired and won't be emitted again. The callback won't be executed.")):t===s&&r++)}));var l=h();function h(){var a=ef(new Promise((function(c,l){n.once(s,(function(){r!==e||a.hasOnFulfilled()||nf.warn("No listeners for SDK Readiness detected. Incorrect control treatments could have been logged if you called getTreatment/s while the SDK was not yet ready."),t.put(t.constants.READY,!0),i=!0,c()})),n.once(u,(function(e){t.put(t.constants.HAS_TIMEDOUT,!0),o=!0,l(e)}))})),rf);return a}return n.once(a,(function(){nf.info("Split SDK is ready from cache."),t.put(t.constants.READY_FROM_CACHE,!0)})),ia()(Object.create(n),{Event:{SDK_READY:s,SDK_READY_FROM_CACHE:a,SDK_UPDATE:c,SDK_READY_TIMED_OUT:u},ready:function(){return o?i?Promise.resolve():ef(Promise.reject("Split SDK has emitted SDK_READY_TIMED_OUT event."),rf):l},__context:t})}var sf,af=ja("splitio-ga-to-split"),cf=(sf={eventTypeId:{event:"eventAction",social:"socialAction"},eventValue:{event:"eventValue",timing:"timingValue"},eventProperties:{pageview:["page"],screenview:["screenName"],event:["eventCategory","eventLabel"],social:["socialNetwork","socialTarget"],timing:["timingCategory","timingVar","timingLabel"],exception:["exDescription","exFatal"]}},function(t){var e=t.get("hitType"),n=t.get(sf.eventTypeId[e]||"hitType"),r=t.get(sf.eventValue[e]),i={},o=sf.eventProperties[e];if(o)for(var s=0;s<o.length;s++)i[o[s]]=t.get(o[s]);return{eventTypeId:n,value:r,properties:i,timestamp:Date.now()}}),uf=/^[^a-zA-Z0-9]+/,lf=/[^-_.:a-zA-Z0-9]+/g,hf=ja("splitio-split-to-ga"),ff=function(){function t(e){if(Ta(this,t),"function"!=typeof t.getGa())return hf.warn("`ga` command queue not found. No hits will be sent."),{};this.trackerNames=t.defaultTrackerNames,e&&("function"==typeof e.filter&&(this.filter=e.filter),"function"==typeof e.mapper&&(this.mapper=e.mapper),Array.isArray(e.trackerNames)&&(this.trackerNames=ya(e.trackerNames)),this.impressions=e.impressions,this.events=e.events),hf.info("Started Split-to-GA integration")}return wa(t,null,[{key:"defaultMapper",value:function(t){var e=t.payload;switch(t.type){case"IMPRESSION":return{hitType:"event",eventCategory:"split-impression",eventAction:"Evaluate "+e.impression.feature,eventLabel:"Treatment: "+e.impression.treatment+". Targeting rule: "+e.impression.label+".",nonInteraction:!0};case"EVENT":return{hitType:"event",eventCategory:"split-event",eventAction:e.eventTypeId,eventValue:e.value,nonInteraction:!0}}return null}},{key:"getGa",value:function(){return"undefined"!=typeof window?window[window.GoogleAnalyticsObject||"ga"]:void 0}},{key:"validateFieldsObject",value:function(t){return!(!t||!t.hitType)||(hf.warn("your custom mapper returned an invalid FieldsObject instance. It must be an object with at least a `hitType` field."),!1)}}]),wa(t,[{key:"queue",value:function(e){var n=t.getGa();if(n){if(!1===this.impressions&&"IMPRESSION"===e.type)return;if(!1===this.events&&"EVENT"===e.type)return;var r;try{if(this.filter&&!this.filter(e))return;if(r=t.defaultMapper(e),this.mapper&&(!(r=this.mapper(e,r))||!t.validateFieldsObject(r)))return}catch(i){return void hf.warn("SplitToGa queue method threw: ".concat(i,". No hit was sent."))}this.trackerNames.forEach((function(t){var e=t?"".concat(t,".send"):"send";r.splitHit=!0,n(e,r)}))}}}]),t}();ff.defaultTrackerNames=[""];var df=ff,pf=ja("splitio"),gf=function(t,e){return"".concat(t.matchingKey?t.matchingKey:t,"-").concat(t.bucketingKey?t.bucketingKey:t,"-").concat(void 0!==e?e:"")};function mf(t){var e,n,r={},i={splitsReadyTracker:Eu.start(Eu.TaskNames.SPLITS_READY),segmentsReadyTracker:Eu.start(Eu.TaskNames.SEGMENTS_READY),sdkReadyTracker:Eu.start(Eu.TaskNames.SDK_READY)},o=new hu,s=function(t){return ia()(Object.create(uu),cu(t))}(t);o.put(o.constants.SETTINGS,s),n=!1,null==(e=s.core.authorizationKey)?Ha.error("Factory instantiation: you passed a null or undefined api_key, api_key must be a non-empty string."):ha(e)?e.length>0?n=e:Ha.error("Factory instantiation: you passed an empty api_key, api_key must be a non-empty string."):Ha.error("Factory instantiation: you passed an invalid api_key, api_key must be a non-empty string."),n&&(Ua[n]?(Ha.warn("Factory instantiation: You already have ".concat(Ua[n]," ").concat(1===Ua[n]?"factory":"factories"," with this API Key. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")),Ua[n]++):(Ua[n]=1,Object.keys(Ua).length>1&&Ha.warn("Factory instantiation: You already have an instance of the Split factory. Make sure you definitely want this additional instance. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application.")));var a=function(){var t=0,e=new $c.a;e.SDK_SPLITS_CACHE_LOADED="state::splits-cache-loaded",e.SDK_SPLITS_ARRIVED="state::splits-arrived";var n=0;function r(e,n){var r=new $c.a,i=0,o=0;return r.on("state::check",(function(){14!==o&&t+i===6?(o=14,r.emit("init::ready")):14===o&&r.emit("state::update")})),e.on("state::splits-arrived",(function(e){e||(t=2),r.emit("state::check")})),e.once("state::splits-cache-loaded",(function(){setTimeout((function(){return r.emit("init::cache-ready")}),0)})),n.on("state::segments-arrived",(function(){i=4,r.emit("state::check")})),r}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=0,o=new $c.a;o.SDK_SEGMENTS_ARRIVED="state::segments-arrived";var s=r(e,o);return t>0&&(i=setTimeout((function(){s.emit("init::timeout","Split SDK emitted SDK_READY_TIMED_OUT event.")}),t),s.once("init::ready",(function(){return clearTimeout(i)}))),s.SDK_READY="init::ready",s.SDK_READY_FROM_CACHE="init::cache-ready",s.SDK_UPDATE="state::update",s.SDK_READY_TIMED_OUT="init::timeout",n++,{splits:e,segments:o,gate:s,destroy:function(){o.removeAllListeners(),s.removeAllListeners(),clearTimeout(i),n>0&&n--,0===n&&e.removeAllListeners()}}}}(),c=a(s.startup.readyTimeout);o.put(o.constants.READINESS,c);var u=of(o);o.put(o.constants.STATUS_MANAGER,u);var l=function(t){var e=t.get(t.constants.SETTINGS);switch(e.storage.type){case"MEMORY":var n=new Vc(e);return{splits:new kc,segments:new Nc(n),impressions:new Dc,metrics:new Mc,count:new Fc,events:new Lc(t),shared:function(t){var e=new Vc(t);return{splits:this.splits,segments:new Nc(e),impressions:this.impressions,metrics:this.metrics,count:this.count,events:this.events,destroy:function(){this.splits=new kc,this.segments.flush()}}},destroy:function(){this.splits.flush(),this.segments.flush(),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.events.clear()}};case"LOCALSTORAGE":var r=new Zc(e),i=Date.now()-864e6;return{splits:new Ic(r,i,e.sync.__splitFiltersValidation),segments:new Oc(r),impressions:new Dc,metrics:new Mc,count:new Fc,events:new Lc(t),shared:function(t){var e=new Zc(t);return{splits:this.splits,segments:new Oc(e),impressions:this.impressions,metrics:this.metrics,count:this.count,events:this.events,destroy:function(){this.splits=new kc,this.segments=new Nc(e)}}},destroy:function(){this.splits=new kc,this.segments=new Nc(new Vc(e)),this.impressions.clear(),this.metrics.clear(),this.count.clear(),this.events.clear()}};default:throw new Error("Unsupported storage type")}}(o);o.put(o.constants.STORAGE,l);var h=function(t){var e=t.get(t.constants.SETTINGS),n=[];if(e.integrations.forEach((function(r){var i;switch(r.type){case"GOOGLE_ANALYTICS_TO_SPLIT":i=function(t,e,n){var r,i,o={prefix:"ga",identities:n.key&&n.trafficType?[{key:n.key,trafficType:n.trafficType}]:void 0};r=function n(r,i){Ta(this,n);var s=ia()({},o,t,i);this.tracker=r;var a,c=(a=s.identities,Array.isArray(a)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return t.filter((function(t){var r=e(t);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(a).filter((function(t){if(!t)return!1;var e=t.key,n=t.trafficType;return!(!ha(e)&&!fa(e)||!ha(n))})):[]);if(0!==c.length){var u=c.length-s.identities.length;u&&af.warn("".concat(u," identities were discarded because they are invalid or duplicated. Identities must be an array of objects with key and trafficType.")),s.identities=c,ha(s.prefix)||(af.warn("The provided `prefix` was ignored since it is invalid. Please check that you are passing a string object as `prefix`."),s.prefix=void 0);var l=r.get("sendHitTask");r.set("sendHitTask",(function(t){if(l(t),!1!==s.hits&&!t.get("splitHit")){try{if(s.filter&&!s.filter(t))return}catch(r){return void af.warn("GaToSplit custom filter threw: ".concat(r))}var n=cf(t);if(s.mapper){try{n=s.mapper(t,n)}catch(r){return void af.warn("GaToSplit custom mapper threw: ".concat(r))}if(!n)return}s.prefix&&(n.eventTypeId="".concat(s.prefix,".").concat(n.eventTypeId)),n.eventTypeId=function(t){if(!ha(t)||0===t.length)return t;var e=t.replace(uf,"").replace(lf,"_"),n=e.slice(0,80);return n.length<e.length&&af.warn("EventTypeId was truncated because it cannot be more than 80 characters long."),n}(n.eventTypeId),function(t){return!(!Wa(t.eventTypeId,"splitio-ga-to-split:mapper")||!1===qa(t.value,"splitio-ga-to-split:mapper")||!1===Za(t.properties,"splitio-ga-to-split:mapper").properties||t.timestamp&&!fa(t.timestamp)||t.key&&!1===Ja(t.key,"splitio-ga-to-split:mapper")||t.trafficTypeName&&!1===dc(t.trafficTypeName,"splitio-ga-to-split:mapper"))}(n)&&(n.key&&n.trafficTypeName?e.events.track(event):s.identities.forEach((function(t){var r=ia()({key:t.key,trafficTypeName:t.trafficType},n);e.events.track(r)})))}})),af.info("Started GA-to-Split integration")}else af.warn("No valid identities were provided. Please check that you are passing a valid list of identities or providing a traffic type at the SDK configuration.")},i=window.GoogleAnalyticsObject||"ga",window[i]=window[i]||function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(window[i].q=window[i].q||[]).push(e)},window[i]("provide","splitTracker",r)}(r,t.get(t.constants.STORAGE),e.core);break;case"SPLIT_TO_GOOGLE_ANALYTICS":i=new df(r)}i&&i.queue&&n.push(i)})),0!==n.length)return{handleImpression:function(t){n.forEach((function(e){return e.queue({type:"IMPRESSION",payload:t})}))},handleEvent:function(t){n.forEach((function(e){return e.queue({type:"EVENT",payload:t})}))}}}(o);o.put(o.constants.INTEGRATIONS_MANAGER,h);var f="localhost"===s.mode?tf:Zh,d=f(o,i),p=d.api,g=d.metricCollectors,m=function(t,e){var n=e.get(e.constants.STATUS_MANAGER);return ia()(Object.create(n),{split:function(n){var r=ec(n,"split");if(!yc(e)||!vc(e,"split")||!r)return null;var i=t.getSplit(r);return oa(i)?i.then((function(t){return nc(e,r,t,"split"),bc(t)})):(nc(e,r,i,"split"),bc(i))},splits:function(){if(!yc(e)||!vc(e,"splits"))return[];var n=t.getAll();return oa(n)?n.then(Sc):Sc(n)},names:function(){return yc(e)&&vc(e,"names")?t.getKeys():[]}})}(l.splits,o),y=fu(s.core.key),v=gf(y,s.core.trafficType);return r[v]=p,pf.info("New Split SDK instance created."),{client:function(t,e){if(void 0===t)return pf.debug("Retrieving default SDK client."),p;if("function"!=typeof l.shared)throw"Shared Client not supported by the storage mechanism. Create isolated instances instead.";var n,i=Ja(t,"Shared Client instantiation");if(!1===i)throw"Shared Client needs a valid key.";if(void 0!==e&&!1===(n=dc(e,"Shared Client instantiation")))throw"Shared Client needs a valid traffic type or no traffic type at all.";var c=gf(i,n);if(r[c])pf.debug("Retrieving existing SDK client.");else{var u=s.overrideKeyAndTT(i,n),h=new hu,d=a(u.startup.readyTimeout);h.put(o.constants.READY_FROM_CACHE,o.get(o.constants.READY_FROM_CACHE,!0)),h.put(o.constants.READINESS,d),h.put(o.constants.STATUS_MANAGER,of(h,-1)),h.put(o.constants.SETTINGS,u),h.put(o.constants.STORAGE,l.shared(u)),r[c]=f(h,!1,g).api,pf.info("New shared client instance created.")}return r[c]},manager:function(){return pf.info("Manager instance retrieved."),m},Logger:La,settings:s}}function yf(t,e){1&t&&(Ni(0,"div",1),Ni(1,"img",2,void 0),Ri(),Ri())}function vf(t,e){1&t&&(Ni(0,"div",1),Ni(1,"p"),xi(2,"No coffe :("),Ri(),Ri())}let _f=(()=>{class t{constructor(){this.title="featureFlag"}ngOnInit(){const t=mf({core:{authorizationKey:"gtv9iof6lm31b94t3o055qlv39du21huuvvf",key:"CUSTOMER_ID"}}).client();t.on(t.Event.SDK_READY,()=>{const e=t.getTreatment("brew-coffee");this.brewCoffee=!!e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["app-root"]],decls:4,vars:2,consts:[["class","covfefe",4,"ngIf"],[1,"covfefe"],["src","https://media1.tenor.com/images/445208ab92a994be1cab515c21f24287/tenor.gif?itemid=8990434"]],template:function(t,e){1&t&&(Ni(0,"p"),xi(1,"Heeeelo"),Ri(),ki(2,yf,2,0,"div",0),ki(3,vf,3,0,"div",0)),2&t&&(qn(2),Ai("ngIf",e.brewCoffee),qn(1),Ai("ngIf",!e.brewCoffee))},directives:[ks],styles:[""]}),t})(),bf=(()=>{class t{}return t.\u0275mod=Qt({type:t,bootstrap:[_f]}),t.\u0275inj=$({factory:function(e){return new(e||t)},providers:[],imports:[[na]]}),t})();(function(){if(An)throw new Error("Cannot enable prod mode after platform setup.");Cn=!1})(),ta().bootstrapModule(bf).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);